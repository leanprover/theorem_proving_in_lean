<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="ascii" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>2. Dependent Type Theory &#8212; Theorem Proving in Lean 3 (outdated) 3.23.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/basic.css?v=686e5160" />
    <link rel="stylesheet" type="text/css" href="_static/alabaster.css?v=5ca61e87" />
    <script src="_static/documentation_options.js?v=5de50469"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3. Propositions and Proofs" href="propositions_and_proofs.html" />
    <link rel="prev" title="1. Introduction" href="introduction.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  

  
  

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="dependent-type-theory">
<span id="id1"></span><h1><span class="section-number">2. </span>Dependent Type Theory<a class="headerlink" href="#dependent-type-theory" title="Link to this heading">&#182;</a></h1>
<p>Dependent type theory is a powerful and expressive language, allowing us to express complex mathematical assertions, write complex hardware and software specifications, and reason about both of these in a natural and uniform way. Lean is based on a version of dependent type theory known as the <em>Calculus of Constructions</em>, with a countable hierarchy of non-cumulative universes and inductive types. By the end of this chapter, you will understand much of what this means.</p>
<section id="simple-type-theory">
<h2><span class="section-number">2.1. </span>Simple Type Theory<a class="headerlink" href="#simple-type-theory" title="Link to this heading">&#182;</a></h2>
<p>As a foundation for mathematics, set theory has a simple ontology that is rather appealing. Everything is a set, including numbers, functions, triangles, stochastic processes, and Riemannian manifolds. It is a remarkable fact that one can construct a rich mathematical universe from a small number of axioms that describe a few basic set-theoretic constructions.</p>
<p>But for many purposes, including formal theorem proving, it is better to have an infrastructure that helps us manage and keep track of the various kinds of mathematical objects we are working with. &#8220;Type theory&#8221; gets its name from the fact that every expression has an associated <em>type</em>. For example, in a given context, <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">0</span></code> may denote a natural number and <code class="docutils literal notranslate"><span class="pre">f</span></code> may denote a function on the natural numbers.</p>
<p>Here are some examples of how we can declare objects in Lean and check their types.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%2F-%20declare%20some%20constants%20-%2F%0A%0Aconstant%20m%20%3A%20nat%20%20%20%20%20%20%20%20--%20m%20is%20a%20natural%20number%0Aconstant%20n%20%3A%20nat%0Aconstants%20b1%20b2%20%3A%20bool%20%20--%20declare%20two%20constants%20at%20once%0A%0A%2F-%20check%20their%20types%20-%2F%0A%0A%23check%20m%20%20%20%20%20%20%20%20%20%20%20%20--%20output%3A%20nat%0A%23check%20n%0A%23check%20n%20%2B%200%20%20%20%20%20%20%20%20--%20nat%0A%23check%20m%20*%20(n%20%2B%200)%20%20--%20nat%0A%23check%20b1%20%20%20%20%20%20%20%20%20%20%20--%20bool%0A%23check%20b1%20%26%26%20b2%20%20%20%20%20--%20%22%26%26%22%20is%20boolean%20and%0A%23check%20b1%20%7C%7C%20b2%20%20%20%20%20--%20boolean%20or%0A%23check%20tt%20%20%20%20%20%20%20%20%20%20%20--%20boolean%20%22true%22%0A%0A--%20Try%20some%20examples%20of%20your%20own." target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="c">/-</span><span class="cm"> declare some constants -/</span>

<span class="kd">constant</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">nat</span><span class="w">        </span><span class="c1">-- m is a natural number</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">nat</span>
<span class="kd">constants</span><span class="w"> </span><span class="n">b1</span><span class="w"> </span><span class="n">b2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">bool</span><span class="w">  </span><span class="c1">-- declare two constants at once</span>

<span class="c">/-</span><span class="cm"> check their types -/</span>

<span class="k">#check</span><span class="w"> </span><span class="n">m</span><span class="w">            </span><span class="c1">-- output: nat</span>
<span class="k">#check</span><span class="w"> </span><span class="n">n</span>
<span class="k">#check</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">0</span><span class="w">        </span><span class="c1">-- nat</span>
<span class="k">#check</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">0</span><span class="o">)</span><span class="w">  </span><span class="c1">-- nat</span>
<span class="k">#check</span><span class="w"> </span><span class="n">b1</span><span class="w">           </span><span class="c1">-- bool</span>
<span class="k">#check</span><span class="w"> </span><span class="n">b1</span><span class="w"> </span><span class="bp">&amp;&amp;</span><span class="w"> </span><span class="n">b2</span><span class="w">     </span><span class="c1">-- &quot;&amp;&amp;&quot; is boolean and</span>
<span class="k">#check</span><span class="w"> </span><span class="n">b1</span><span class="w"> </span><span class="bp">||</span><span class="w"> </span><span class="n">b2</span><span class="w">     </span><span class="c1">-- boolean or</span>
<span class="k">#check</span><span class="w"> </span><span class="n">tt</span><span class="w">           </span><span class="c1">-- boolean &quot;true&quot;</span>

<span class="c1">-- Try some examples of your own.</span>
</pre></div>
</div>
</div><p>Any text between the <code class="docutils literal notranslate"><span class="pre">/-</span></code> and <code class="docutils literal notranslate"><span class="pre">-/</span></code> constitutes a comment that is ignored by Lean. Similarly, two dashes indicate that the rest of the line contains a comment that is also ignored. Comment blocks can be nested, making it possible to &#8220;comment out&#8221; chunks of code, just as in many programming languages.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">constant</span></code> and <code class="docutils literal notranslate"><span class="pre">constants</span></code> commands introduce new constant symbols into the working environment. The <code class="docutils literal notranslate"><span class="pre">#check</span></code> command asks Lean to report their types; in Lean, commands that query the system for information typically begin with the hash symbol. You should try declaring some constants and type checking some expressions on your own. Declaring new objects in this way is a good way to experiment with the system, but it is ultimately undesirable: Lean is a foundational system, which is to say, it provides us with powerful mechanisms to <em>define</em> all the mathematical objects we need, rather than simply postulating them. We will explore these mechanisms in the chapters to come.</p>
<p>What makes simple type theory powerful is that one can build new types out of others. For example, if <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> and <code class="docutils literal notranslate"><span class="pre">&#946;</span></code> are types, <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code> denotes the type of functions from <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> to <code class="docutils literal notranslate"><span class="pre">&#946;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">&#215;</span> <span class="pre">&#946;</span></code> denotes the cartesian product, that is, the type of ordered pairs consisting of an element of <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> paired with an element of <code class="docutils literal notranslate"><span class="pre">&#946;</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=constants%20m%20n%20%3A%20nat%0A%0Aconstant%20f%20%3A%20nat%20%E2%86%92%20nat%20%20%20%20%20%20%20%20%20%20%20--%20type%20the%20arrow%20as%20%22%5Cto%22%20or%20%22%5Cr%22%0Aconstant%20f'%20%3A%20nat%20-%3E%20nat%20%20%20%20%20%20%20%20%20--%20alternative%20ASCII%20notation%0Aconstant%20f''%20%3A%20%E2%84%95%20%E2%86%92%20%E2%84%95%20%20%20%20%20%20%20%20%20%20%20%20%20--%20alternative%20notation%20for%20nat%0Aconstant%20p%20%3A%20nat%20%C3%97%20nat%20%20%20%20%20%20%20%20%20%20%20--%20type%20the%20product%20as%20%22%5Ctimes%22%0Aconstant%20q%20%3A%20prod%20nat%20nat%20%20%20%20%20%20%20%20--%20alternative%20notation%0Aconstant%20g%20%3A%20nat%20%E2%86%92%20nat%20%E2%86%92%20nat%0Aconstant%20g'%20%3A%20nat%20%E2%86%92%20(nat%20%E2%86%92%20nat)%20%20--%20has%20the%20same%20type%20as%20g!%0Aconstant%20h%20%3A%20nat%20%C3%97%20nat%20%E2%86%92%20nat%0A%0Aconstant%20F%20%3A%20(nat%20%E2%86%92%20nat)%20%E2%86%92%20nat%20%20%20--%20a%20%22functional%22%0A%0A%23check%20f%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%E2%84%95%20%E2%86%92%20%E2%84%95%0A%23check%20f%20n%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%E2%84%95%0A%23check%20g%20m%20n%20%20%20%20%20%20%20%20%20%20%20--%20%E2%84%95%0A%23check%20g%20m%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%E2%84%95%20%E2%86%92%20%E2%84%95%0A%23check%20(m%2C%20n)%20%20%20%20%20%20%20%20%20%20--%20%E2%84%95%20%C3%97%20%E2%84%95%0A%23check%20p.1%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%E2%84%95%0A%23check%20p.2%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%E2%84%95%0A%23check%20(m%2C%20n).1%20%20%20%20%20%20%20%20--%20%E2%84%95%0A%23check%20(p.1%2C%20n)%20%20%20%20%20%20%20%20--%20%E2%84%95%20%C3%97%20%E2%84%95%0A%23check%20F%20f%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%E2%84%95" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">constants</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">nat</span>

<span class="kd">constant</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span><span class="w">           </span><span class="c1">-- type the arrow as &quot;\to&quot; or &quot;\r&quot;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">f&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">-&gt;</span><span class="w"> </span><span class="n">nat</span><span class="w">         </span><span class="c1">-- alternative ASCII notation</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">f&#39;&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="w">             </span><span class="c1">-- alternative notation for nat</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">nat</span><span class="w">           </span><span class="c1">-- type the product as &quot;\times&quot;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">q</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">prod</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="n">nat</span><span class="w">        </span><span class="c1">-- alternative notation</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">g&#39;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="o">(</span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span><span class="o">)</span><span class="w">  </span><span class="c1">-- has the same type as g!</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span>

<span class="kd">constant</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span><span class="w">   </span><span class="c1">-- a &quot;functional&quot;</span>

<span class="k">#check</span><span class="w"> </span><span class="n">f</span><span class="w">               </span><span class="c1">-- &#8469; &#8594; &#8469;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">n</span><span class="w">             </span><span class="c1">-- &#8469;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">n</span><span class="w">           </span><span class="c1">-- &#8469;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">m</span><span class="w">             </span><span class="c1">-- &#8469; &#8594; &#8469;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="o">,</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w">          </span><span class="c1">-- &#8469; &#215; &#8469;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">1</span><span class="w">             </span><span class="c1">-- &#8469;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">p</span><span class="bp">.</span><span class="mi">2</span><span class="w">             </span><span class="c1">-- &#8469;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="o">,</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="w">        </span><span class="c1">-- &#8469;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">p</span><span class="bp">.</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="w">        </span><span class="c1">-- &#8469; &#215; &#8469;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="n">f</span><span class="w">             </span><span class="c1">-- &#8469;</span>
</pre></div>
</div>
</div><p>Once again, you should try some examples on your own.</p>
<p>Let us dispense with some basic syntax. You can enter the unicode arrow <code class="docutils literal notranslate"><span class="pre">&#8594;</span></code> by typing <code class="docutils literal notranslate"><span class="pre">\to</span></code> or <code class="docutils literal notranslate"><span class="pre">\r</span></code>. You can also use the ASCII alternative <code class="docutils literal notranslate"><span class="pre">-&gt;</span></code>, so that the expression <code class="docutils literal notranslate"><span class="pre">nat</span> <span class="pre">-&gt;</span> <span class="pre">nat</span></code> and <code class="docutils literal notranslate"><span class="pre">nat</span> <span class="pre">&#8594;</span> <span class="pre">nat</span></code> mean the same thing. Both expressions denote the type of functions that take a natural number as input and return a natural number as output. The symbol <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code> is alternative unicode notation for <code class="docutils literal notranslate"><span class="pre">nat</span></code>; you can enter it by typing <code class="docutils literal notranslate"><span class="pre">\nat</span></code>. The unicode symbol <code class="docutils literal notranslate"><span class="pre">&#215;</span></code> for the cartesian product is entered <code class="docutils literal notranslate"><span class="pre">\times</span></code>. We will generally use lower-case greek letters like <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, <code class="docutils literal notranslate"><span class="pre">&#946;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&#947;</span></code> to range over types. You can enter these particular ones with <code class="docutils literal notranslate"><span class="pre">\a</span></code>, <code class="docutils literal notranslate"><span class="pre">\b</span></code>, and <code class="docutils literal notranslate"><span class="pre">\g</span></code>.</p>
<p>There are a few more things to notice here. First, the application of a function <code class="docutils literal notranslate"><span class="pre">f</span></code> to a value <code class="docutils literal notranslate"><span class="pre">x</span></code> is denoted <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">x</span></code>. Second, when writing type expressions, arrows associate to the <em>right</em>; for example, the type of <code class="docutils literal notranslate"><span class="pre">g</span></code> is <code class="docutils literal notranslate"><span class="pre">nat</span> <span class="pre">&#8594;</span> <span class="pre">(nat</span> <span class="pre">&#8594;</span> <span class="pre">nat)</span></code>. Thus we can view <code class="docutils literal notranslate"><span class="pre">g</span></code> as a function that takes natural numbers and returns another function that takes a natural number and returns a natural number. In type theory, this is generally more convenient than writing <code class="docutils literal notranslate"><span class="pre">g</span></code> as a function that takes a pair of natural numbers as input, and returns a natural number as output. For example, it allows us to &#8220;partially apply&#8221; the function <code class="docutils literal notranslate"><span class="pre">g</span></code>. The example above shows that <code class="docutils literal notranslate"><span class="pre">g</span> <span class="pre">m</span></code> has type <code class="docutils literal notranslate"><span class="pre">nat</span> <span class="pre">&#8594;</span> <span class="pre">nat</span></code>, that is, the function that &#8220;waits&#8221; for a second argument, <code class="docutils literal notranslate"><span class="pre">n</span></code>, and then returns <code class="docutils literal notranslate"><span class="pre">g</span> <span class="pre">m</span> <span class="pre">n</span></code>. Taking a function <code class="docutils literal notranslate"><span class="pre">h</span></code> of type <code class="docutils literal notranslate"><span class="pre">nat</span> <span class="pre">&#215;</span> <span class="pre">nat</span> <span class="pre">&#8594;</span> <span class="pre">nat</span></code> and &#8220;redefining&#8221; it to look like <code class="docutils literal notranslate"><span class="pre">g</span></code> is a process known as <em>currying</em>, something we will come back to below.</p>
<p>By now you may also have guessed that, in Lean, <code class="docutils literal notranslate"><span class="pre">(m,</span> <span class="pre">n)</span></code> denotes the ordered pair of <code class="docutils literal notranslate"><span class="pre">m</span></code> and <code class="docutils literal notranslate"><span class="pre">n</span></code>, and if <code class="docutils literal notranslate"><span class="pre">p</span></code> is a pair, <code class="docutils literal notranslate"><span class="pre">p.1</span></code> and <code class="docutils literal notranslate"><span class="pre">p.2</span></code> denote the two projections.</p>
</section>
<section id="types-as-objects">
<h2><span class="section-number">2.2. </span>Types as Objects<a class="headerlink" href="#types-as-objects" title="Link to this heading">&#182;</a></h2>
<p>One way in which Lean&#8217;s dependent type theory extends simple type theory is that types themselves &#8212; entities like <code class="docutils literal notranslate"><span class="pre">nat</span></code> and <code class="docutils literal notranslate"><span class="pre">bool</span></code> &#8212; are first-class citizens, which is to say that they themselves are objects of study. For that to be the case, each of them also has to have a type.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23check%20nat%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20Type%0A%23check%20bool%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20Type%0A%23check%20nat%20%E2%86%92%20bool%20%20%20%20%20%20%20%20--%20Type%0A%23check%20nat%20%C3%97%20bool%20%20%20%20%20%20%20%20--%20Type%0A%23check%20nat%20%E2%86%92%20nat%20%20%20%20%20%20%20%20%20--%20...%0A%23check%20nat%20%C3%97%20nat%20%E2%86%92%20nat%0A%23check%20nat%20%E2%86%92%20nat%20%E2%86%92%20nat%0A%23check%20nat%20%E2%86%92%20(nat%20%E2%86%92%20nat)%0A%23check%20nat%20%E2%86%92%20nat%20%E2%86%92%20bool%0A%23check%20(nat%20%E2%86%92%20nat)%20%E2%86%92%20nat" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">nat</span><span class="w">               </span><span class="c1">-- Type</span>
<span class="k">#check</span><span class="w"> </span><span class="n">bool</span><span class="w">              </span><span class="c1">-- Type</span>
<span class="k">#check</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">bool</span><span class="w">        </span><span class="c1">-- Type</span>
<span class="k">#check</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">bool</span><span class="w">        </span><span class="c1">-- Type</span>
<span class="k">#check</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span><span class="w">         </span><span class="c1">-- ...</span>
<span class="k">#check</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span>
<span class="k">#check</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span>
<span class="k">#check</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="o">(</span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">bool</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">nat</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">nat</span>
</pre></div>
</div>
</div><p>We see that each one of the expressions above is an object of type <code class="docutils literal notranslate"><span class="pre">Type</span></code>. We can also declare new constants and constructors for types:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=constants%20%CE%B1%20%CE%B2%20%3A%20Type%0Aconstant%20F%20%3A%20Type%20%E2%86%92%20Type%0Aconstant%20G%20%3A%20Type%20%E2%86%92%20Type%20%E2%86%92%20Type%0A%0A%23check%20%CE%B1%20%20%20%20%20%20%20%20--%20Type%0A%23check%20F%20%CE%B1%20%20%20%20%20%20--%20Type%0A%23check%20F%20nat%20%20%20%20--%20Type%0A%23check%20G%20%CE%B1%20%20%20%20%20%20--%20Type%20%E2%86%92%20Type%0A%23check%20G%20%CE%B1%20%CE%B2%20%20%20%20--%20Type%0A%23check%20G%20%CE%B1%20nat%20%20--%20Type" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">constants</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="kt">Type</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="kt">Type</span>

<span class="k">#check</span><span class="w"> </span><span class="n">&#945;</span><span class="w">        </span><span class="c1">-- Type</span>
<span class="k">#check</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="n">&#945;</span><span class="w">      </span><span class="c1">-- Type</span>
<span class="k">#check</span><span class="w"> </span><span class="n">F</span><span class="w"> </span><span class="n">nat</span><span class="w">    </span><span class="c1">-- Type</span>
<span class="k">#check</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="n">&#945;</span><span class="w">      </span><span class="c1">-- Type &#8594; Type</span>
<span class="k">#check</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w">    </span><span class="c1">-- Type</span>
<span class="k">#check</span><span class="w"> </span><span class="n">G</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">nat</span><span class="w">  </span><span class="c1">-- Type</span>
</pre></div>
</div>
</div><p>Indeed, we have already seen an example of a function of type <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">&#8594;</span> <span class="pre">Type</span> <span class="pre">&#8594;</span> <span class="pre">Type</span></code>, namely, the Cartesian product.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=constants%20%CE%B1%20%CE%B2%20%3A%20Type%0A%0A%23check%20prod%20%CE%B1%20%CE%B2%20%20%20%20%20%20%20--%20Type%0A%23check%20prod%20nat%20nat%20%20%20--%20Type" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">constants</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span>

<span class="k">#check</span><span class="w"> </span><span class="n">prod</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w">       </span><span class="c1">-- Type</span>
<span class="k">#check</span><span class="w"> </span><span class="n">prod</span><span class="w"> </span><span class="n">nat</span><span class="w"> </span><span class="n">nat</span><span class="w">   </span><span class="c1">-- Type</span>
</pre></div>
</div>
</div><p>Here is another example: given any type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, the type <code class="docutils literal notranslate"><span class="pre">list</span> <span class="pre">&#945;</span></code> denotes the type of lists of elements of type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=constant%20%CE%B1%20%3A%20Type%0A%0A%23check%20list%20%CE%B1%20%20%20%20--%20Type%0A%23check%20list%20nat%20%20--%20Type" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">constant</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span>

<span class="k">#check</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span><span class="w">    </span><span class="c1">-- Type</span>
<span class="k">#check</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">nat</span><span class="w">  </span><span class="c1">-- Type</span>
</pre></div>
</div>
</div><p>For those more comfortable with set-theoretic foundations, it may be helpful to think of a type as nothing more than a set, in which case, the elements of the type are just the elements of the set. Given that every expression in Lean has a type, it is natural to ask: what type does <code class="docutils literal notranslate"><span class="pre">Type</span></code> itself have?</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23check%20Type%20%20%20%20%20%20--%20Type%201" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="kt">Type</span><span class="w">      </span><span class="c1">-- Type 1</span>
</pre></div>
</div>
</div><p>We have actually come up against one of the most subtle aspects of Lean&#8217;s typing system. Lean&#8217;s underlying foundation has an infinite hierarchy of types:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23check%20Type%20%20%20%20%20--%20Type%201%0A%23check%20Type%201%20%20%20--%20Type%202%0A%23check%20Type%202%20%20%20--%20Type%203%0A%23check%20Type%203%20%20%20--%20Type%204%0A%23check%20Type%204%20%20%20--%20Type%205" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="kt">Type</span><span class="w">     </span><span class="c1">-- Type 1</span>
<span class="k">#check</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="mi">1</span><span class="w">   </span><span class="c1">-- Type 2</span>
<span class="k">#check</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="mi">2</span><span class="w">   </span><span class="c1">-- Type 3</span>
<span class="k">#check</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="mi">3</span><span class="w">   </span><span class="c1">-- Type 4</span>
<span class="k">#check</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="mi">4</span><span class="w">   </span><span class="c1">-- Type 5</span>
</pre></div>
</div>
</div><p>Think of <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">0</span></code> as a universe of &#8220;small&#8221; or &#8220;ordinary&#8221; types. <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">1</span></code> is then a larger universe of types, which contains <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">0</span></code> as an element, and <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">2</span></code> is an even larger universe of types, which contains <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">1</span></code> as an element. The list is indefinite, so that there is a <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">n</span></code> for every natural number <code class="docutils literal notranslate"><span class="pre">n</span></code>. <code class="docutils literal notranslate"><span class="pre">Type</span></code> is an abbreviation for <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">0</span></code>:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23check%20Type%0A%23check%20Type%200" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="kt">Type</span>
<span class="k">#check</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="mi">0</span>
</pre></div>
</div>
</div><p>There is also another type, <code class="docutils literal notranslate"><span class="pre">Prop</span></code>, which has special properties.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23check%20Prop%20--%20Type" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="kt">Prop</span><span class="w"> </span><span class="c1">-- Type</span>
</pre></div>
</div>
</div><p>We will discuss <code class="docutils literal notranslate"><span class="pre">Prop</span></code> in the next chapter.</p>
<p>We want some operations, however, to be <em>polymorphic</em> over type universes. For example, <code class="docutils literal notranslate"><span class="pre">list</span> <span class="pre">&#945;</span></code> should make sense for any type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, no matter which type universe <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> lives in. This explains the type annotation of the function <code class="docutils literal notranslate"><span class="pre">list</span></code>:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23check%20list%20%20%20%20--%20Type%20u_1%20%E2%86%92%20Type%20u_1" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">list</span><span class="w">    </span><span class="c1">-- Type u_1 &#8594; Type u_1</span>
</pre></div>
</div>
</div><p>Here <code class="docutils literal notranslate"><span class="pre">u_1</span></code> is a variable ranging over type levels. The output of the <code class="docutils literal notranslate"><span class="pre">#check</span></code> command means that whenever <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> has type <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">n</span></code>, <code class="docutils literal notranslate"><span class="pre">list</span> <span class="pre">&#945;</span></code> also has type <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">n</span></code>. The function <code class="docutils literal notranslate"><span class="pre">prod</span></code> is similarly polymorphic:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23check%20prod%20%20%20%20--%20Type%20u_1%20%E2%86%92%20Type%20u_2%20%E2%86%92%20Type%20(max%20u_1%20u_2)" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">prod</span><span class="w">    </span><span class="c1">-- Type u_1 &#8594; Type u_2 &#8594; Type (max u_1 u_2)</span>
</pre></div>
</div>
</div><p>To define polymorphic constants and variables, Lean allows us to declare universe variables explicitly:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=universe%20u%0Aconstant%20%CE%B1%20%3A%20Type%20u%0A%23check%20%CE%B1" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">universe</span><span class="w"> </span><span class="n">u</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span>
<span class="k">#check</span><span class="w"> </span><span class="n">&#945;</span>
</pre></div>
</div>
</div><p>Equivalently, we can write <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">_</span></code> or <code class="docutils literal notranslate"><span class="pre">Type*</span></code> to avoid giving the arbitrary universe a name:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=constant%20%CE%B1%20%3A%20Type%20_%0A%23check%20%CE%B1%0A%0Aconstant%20%CE%B2%20%3A%20Type*%0A%23check%20%CE%B2" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">constant</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">_</span>
<span class="k">#check</span><span class="w"> </span><span class="n">&#945;</span>

<span class="kd">constant</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span>
<span class="k">#check</span><span class="w"> </span><span class="n">&#946;</span>
</pre></div>
</div>
</div><p>Throughout this book, we will generally use <code class="docutils literal notranslate"><span class="pre">Type*</span></code> in examples when we want type constructions to have as much generality as possible. We will come to learn that the ability to treat type constructors as instances of ordinary mathematical functions is a powerful feature of dependent type theory.</p>
</section>
<section id="function-abstraction-and-evaluation">
<h2><span class="section-number">2.3. </span>Function Abstraction and Evaluation<a class="headerlink" href="#function-abstraction-and-evaluation" title="Link to this heading">&#182;</a></h2>
<p>We have seen that if we have <code class="docutils literal notranslate"><span class="pre">m</span> <span class="pre">n</span> <span class="pre">:</span> <span class="pre">nat</span></code>, then we have <code class="docutils literal notranslate"><span class="pre">(m,</span> <span class="pre">n)</span> <span class="pre">:</span> <span class="pre">nat</span> <span class="pre">&#215;</span> <span class="pre">nat</span></code>. This gives us a way of creating pairs of natural numbers. Conversely, if we have <code class="docutils literal notranslate"><span class="pre">p</span> <span class="pre">:</span> <span class="pre">nat</span> <span class="pre">&#215;</span> <span class="pre">nat</span></code>, then we have <code class="docutils literal notranslate"><span class="pre">fst</span> <span class="pre">p</span> <span class="pre">:</span> <span class="pre">nat</span></code> and <code class="docutils literal notranslate"><span class="pre">snd</span> <span class="pre">p</span> <span class="pre">:</span> <span class="pre">nat</span></code>. This gives us a way of &#8220;using&#8221; a pair, by extracting its two components.</p>
<p>We already know how to &#8220;use&#8221; a function <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code>, namely, we can apply it to an element <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> to obtain <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">a</span> <span class="pre">:</span> <span class="pre">&#946;</span></code>. But how do we create a function from another expression?</p>
<p>The companion to application is a process known as &#8220;abstraction,&#8221; or &#8220;lambda abstraction.&#8221; Suppose that by temporarily postulating a variable <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> we can construct an expression <code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">:</span> <span class="pre">&#946;</span></code>. Then the expression <code class="docutils literal notranslate"><span class="pre">fun</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">t</span></code>, or, equivalently, <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">t</span></code>, is an object of type <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code>. Think of this as the function from <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> to <code class="docutils literal notranslate"><span class="pre">&#946;</span></code> which maps any value <code class="docutils literal notranslate"><span class="pre">x</span></code> to the value <code class="docutils literal notranslate"><span class="pre">t</span></code>, which depends on <code class="docutils literal notranslate"><span class="pre">x</span></code>. For example, in mathematics it is common to say &#8220;let <code class="docutils literal notranslate"><span class="pre">f</span></code> be the function which maps any natural number <code class="docutils literal notranslate"><span class="pre">x</span></code> to <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">+</span> <span class="pre">5</span></code>.&#8221; The expression <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">nat,</span> <span class="pre">x</span> <span class="pre">+</span> <span class="pre">5</span></code> is just a symbolic representation of the right-hand side of this assignment.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23check%20fun%20x%20%3A%20nat%2C%20x%20%2B%205%0A%23check%20%CE%BB%20x%20%3A%20nat%2C%20x%20%2B%205" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">nat</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">5</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">nat</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">5</span>
</pre></div>
</div>
</div><p>Here are some more abstract examples:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=constants%20%CE%B1%20%CE%B2%20%20%3A%20Type%0Aconstants%20a1%20a2%20%3A%20%CE%B1%0Aconstants%20b1%20b2%20%3A%20%CE%B2%0A%0Aconstant%20f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B1%0Aconstant%20g%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%0Aconstant%20h%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%20%E2%86%92%20%CE%B1%0Aconstant%20p%20%3A%20%CE%B1%20%E2%86%92%20%CE%B1%20%E2%86%92%20bool%0A%0A%23check%20fun%20x%20%3A%20%CE%B1%2C%20f%20x%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%CE%B1%20%E2%86%92%20%CE%B1%0A%23check%20%CE%BB%20x%20%3A%20%CE%B1%2C%20f%20x%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%CE%B1%20%E2%86%92%20%CE%B1%0A%23check%20%CE%BB%20x%20%3A%20%CE%B1%2C%20f%20(f%20x)%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%CE%B1%20%E2%86%92%20%CE%B1%0A%23check%20%CE%BB%20x%20%3A%20%CE%B1%2C%20h%20x%20b1%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%CE%B1%20%E2%86%92%20%CE%B1%0A%23check%20%CE%BB%20y%20%3A%20%CE%B2%2C%20h%20a1%20y%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%CE%B2%20%E2%86%92%20%CE%B1%0A%23check%20%CE%BB%20x%20%3A%20%CE%B1%2C%20p%20(f%20(f%20x))%20(h%20(f%20a1)%20b2)%20%20--%20%CE%B1%20%E2%86%92%20bool%0A%23check%20%CE%BB%20x%20%3A%20%CE%B1%2C%20%CE%BB%20y%20%3A%20%CE%B2%2C%20h%20(f%20x)%20y%20%20%20%20%20%20%20%20%20--%20%CE%B1%20%E2%86%92%20%CE%B2%20%E2%86%92%20%CE%B1%0A%23check%20%CE%BB%20(x%20%3A%20%CE%B1)%20(y%20%3A%20%CE%B2)%2C%20h%20(f%20x)%20y%20%20%20%20%20%20%20%20--%20%CE%B1%20%E2%86%92%20%CE%B2%20%E2%86%92%20%CE%B1%0A%23check%20%CE%BB%20x%20y%2C%20h%20(f%20x)%20y%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%CE%B1%20%E2%86%92%20%CE%B2%20%E2%86%92%20%CE%B1" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">constants</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w">  </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span>
<span class="kd">constants</span><span class="w"> </span><span class="n">a1</span><span class="w"> </span><span class="n">a2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">constants</span><span class="w"> </span><span class="n">b1</span><span class="w"> </span><span class="n">b2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span>

<span class="kd">constant</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">bool</span>

<span class="k">#check</span><span class="w"> </span><span class="k">fun</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="w">                      </span><span class="c1">-- &#945; &#8594; &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="w">                        </span><span class="c1">-- &#945; &#8594; &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w">                    </span><span class="c1">-- &#945; &#8594; &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">b1</span><span class="w">                     </span><span class="c1">-- &#945; &#8594; &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="n">a1</span><span class="w"> </span><span class="n">y</span><span class="w">                     </span><span class="c1">-- &#946; &#8594; &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">a1</span><span class="o">)</span><span class="w"> </span><span class="n">b2</span><span class="o">)</span><span class="w">  </span><span class="c1">-- &#945; &#8594; bool</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="n">y</span><span class="w">         </span><span class="c1">-- &#945; &#8594; &#946; &#8594; &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">y</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="o">),</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="n">y</span><span class="w">        </span><span class="c1">-- &#945; &#8594; &#946; &#8594; &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="n">y</span><span class="o">,</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="n">y</span><span class="w">                    </span><span class="c1">-- &#945; &#8594; &#946; &#8594; &#945;</span>
</pre></div>
</div>
</div><p>Lean interprets the final three examples as the same expression; in the last expression, Lean infers the type of <code class="docutils literal notranslate"><span class="pre">x</span></code> and <code class="docutils literal notranslate"><span class="pre">y</span></code> from the types of <code class="docutils literal notranslate"><span class="pre">f</span></code> and <code class="docutils literal notranslate"><span class="pre">h</span></code>.</p>
<p>Try writing some expressions on your own. Some mathematically common examples of operations of functions can be described in terms of lambda abstraction:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=constants%20%CE%B1%20%CE%B2%20%CE%B3%20%3A%20Type%0Aconstant%20f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%0Aconstant%20g%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3%0Aconstant%20b%20%3A%20%CE%B2%0A%0A%23check%20%CE%BB%20x%20%3A%20%CE%B1%2C%20x%20%20%20%20%20%20%20%20--%20%CE%B1%20%E2%86%92%20%CE%B1%0A%23check%20%CE%BB%20x%20%3A%20%CE%B1%2C%20b%20%20%20%20%20%20%20%20--%20%CE%B1%20%E2%86%92%20%CE%B2%0A%23check%20%CE%BB%20x%20%3A%20%CE%B1%2C%20g%20(f%20x)%20%20--%20%CE%B1%20%E2%86%92%20%CE%B3%0A%23check%20%CE%BB%20x%2C%20g%20(f%20x)" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">constants</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span>

<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="w">        </span><span class="c1">-- &#945; &#8594; &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="w">        </span><span class="c1">-- &#945; &#8594; &#946;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w">  </span><span class="c1">-- &#945; &#8594; &#947;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
</pre></div>
</div>
</div><p>Think about what these expressions mean. The expression <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">x</span></code> denotes the identity function on <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, the expression <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">b</span></code> denotes the constant function that always returns <code class="docutils literal notranslate"><span class="pre">b</span></code>, and <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">g</span> <span class="pre">(f</span> <span class="pre">x)</span></code>, denotes the composition of <code class="docutils literal notranslate"><span class="pre">f</span></code> and <code class="docutils literal notranslate"><span class="pre">g</span></code>. We can, in general, leave off the type annotations on the variable and let Lean infer it for us. So, for example, we can write <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">x,</span> <span class="pre">g</span> <span class="pre">(f</span> <span class="pre">x)</span></code> instead of <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">g</span> <span class="pre">(f</span> <span class="pre">x)</span></code>.</p>
<p>We can abstract over any of the constants in the previous definitions:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=constants%20%CE%B1%20%CE%B2%20%CE%B3%20%3A%20Type%0Aconstant%20f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%0Aconstant%20g%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3%0Aconstant%20b%20%3A%20%CE%B2%0A%0A--%20BEGIN%0A%23check%20%CE%BB%20b%20%3A%20%CE%B2%2C%20%CE%BB%20x%20%3A%20%CE%B1%2C%20x%20%20%20%20%20--%20%CE%B2%20%E2%86%92%20%CE%B1%20%E2%86%92%20%CE%B1%0A%23check%20%CE%BB%20(b%20%3A%20%CE%B2)%20(x%20%3A%20%CE%B1)%2C%20x%20%20%20%20--%20%CE%B2%20%E2%86%92%20%CE%B1%20%E2%86%92%20%CE%B1%0A%23check%20%CE%BB%20(g%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3)%20(f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2)%20(x%20%3A%20%CE%B1)%2C%20g%20(f%20x)%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20(%CE%B2%20%E2%86%92%20%CE%B3)%20%E2%86%92%20(%CE%B1%20%E2%86%92%20%CE%B2)%20%E2%86%92%20%CE%B1%20%E2%86%92%20%CE%B3%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="o">,</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="w">     </span><span class="c1">-- &#946; &#8594; &#945; &#8594; &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">),</span><span class="w"> </span><span class="n">x</span><span class="w">    </span><span class="c1">-- &#946; &#8594; &#945; &#8594; &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">),</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
<span class="w">                              </span><span class="c1">-- (&#946; &#8594; &#947;) &#8594; (&#945; &#8594; &#946;) &#8594; &#945; &#8594; &#947;</span>
</pre></div>
</div>
</div><p>Lean lets us combine lambdas, so the second example is equivalent to the first. We can even abstract over the type:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=constants%20%CE%B1%20%CE%B2%20%CE%B3%20%3A%20Type%0Aconstant%20f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%0Aconstant%20g%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3%0Aconstant%20b%20%3A%20%CE%B2%0A%0A--%20BEGIN%0A%23check%20%CE%BB%20(%CE%B1%20%CE%B2%20%3A%20Type*)%20(b%20%3A%20%CE%B2)%20(x%20%3A%20%CE%B1)%2C%20x%0A%23check%20%CE%BB%20(%CE%B1%20%CE%B2%20%CE%B3%20%3A%20Type*)%20(g%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3)%20(f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2)%20(x%20%3A%20%CE%B1)%2C%20g%20(f%20x)%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">),</span><span class="w"> </span><span class="n">x</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">),</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
</pre></div>
</div>
</div><p>The last expression, for example, denotes the function that takes three types, <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, <code class="docutils literal notranslate"><span class="pre">&#946;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&#947;</span></code>, and two functions, <code class="docutils literal notranslate"><span class="pre">g</span> <span class="pre">:</span> <span class="pre">&#946;</span> <span class="pre">&#8594;</span> <span class="pre">&#947;</span></code> and <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code>, and returns the composition of <code class="docutils literal notranslate"><span class="pre">g</span></code> and <code class="docutils literal notranslate"><span class="pre">f</span></code>. (Making sense of the type of this function requires an understanding of dependent products, which we will explain below.) Within a lambda expression <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">t</span></code>, the variable <code class="docutils literal notranslate"><span class="pre">x</span></code> is a &#8220;bound variable&#8221;: it is really a placeholder, whose &#8220;scope&#8221; does not extend beyond <code class="docutils literal notranslate"><span class="pre">t</span></code>. For example, the variable <code class="docutils literal notranslate"><span class="pre">b</span></code> in the expression <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">(b</span> <span class="pre">:</span> <span class="pre">&#946;)</span> <span class="pre">(x</span> <span class="pre">:</span> <span class="pre">&#945;),</span> <span class="pre">x</span></code> has nothing to do with the constant <code class="docutils literal notranslate"><span class="pre">b</span></code> declared earlier. In fact, the expression denotes the same function as <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">(u</span> <span class="pre">:</span> <span class="pre">&#946;)</span> <span class="pre">(z</span> <span class="pre">:</span> <span class="pre">&#945;),</span> <span class="pre">z</span></code>. Formally, the expressions that are the same up to a renaming of bound variables are called <em>alpha equivalent</em>, and are considered &#8220;the same.&#8221; Lean recognizes this equivalence.</p>
<p>Notice that applying a term <code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code> to a term <code class="docutils literal notranslate"><span class="pre">s</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> yields an expression <code class="docutils literal notranslate"><span class="pre">t</span> <span class="pre">s</span> <span class="pre">:</span> <span class="pre">&#946;</span></code>. Returning to the previous example and renaming bound variables for clarity, notice the types of the following expressions:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=constants%20%CE%B1%20%CE%B2%20%CE%B3%20%3A%20Type%0Aconstant%20f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%0Aconstant%20g%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3%0Aconstant%20h%20%3A%20%CE%B1%20%E2%86%92%20%CE%B1%0Aconstants%20(a%20%3A%20%CE%B1)%20(b%20%3A%20%CE%B2)%0A%0A%23check%20(%CE%BB%20x%20%3A%20%CE%B1%2C%20x)%20a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%CE%B1%0A%23check%20(%CE%BB%20x%20%3A%20%CE%B1%2C%20b)%20a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%CE%B2%0A%23check%20(%CE%BB%20x%20%3A%20%CE%B1%2C%20b)%20(h%20a)%20%20%20%20%20%20%20%20%20%20%20%20--%20%CE%B2%0A%23check%20(%CE%BB%20x%20%3A%20%CE%B1%2C%20g%20(f%20x))%20(h%20(h%20a))%20%20--%20%CE%B3%0A%0A%23check%20(%CE%BB%20(v%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3)%20(u%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2)%20x%2C%20v%20(u%20x))%20g%20f%20a%20%20%20--%20%CE%B3%0A%0A%23check%20(%CE%BB%20(Q%20R%20S%20%3A%20Type*)%20(v%20%3A%20R%20%E2%86%92%20S)%20(u%20%3A%20Q%20%E2%86%92%20R)%20(x%20%3A%20Q)%2C%0A%20%20%20%20%20%20%20%20v%20(u%20x))%20%CE%B1%20%CE%B2%20%CE%B3%20g%20f%20a%20%20%20%20%20%20%20%20--%20%CE%B3" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">constants</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">constants</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="n">a</span><span class="w">                </span><span class="c1">-- &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="n">a</span><span class="w">                </span><span class="c1">-- &#946;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="n">a</span><span class="o">)</span><span class="w">            </span><span class="c1">-- &#946;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">))</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="n">a</span><span class="o">))</span><span class="w">  </span><span class="c1">-- &#947;</span>

<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="bp">&#955;</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="n">x</span><span class="o">))</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="w">   </span><span class="c1">-- &#947;</span>

<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="bp">&#955;</span><span class="w"> </span><span class="o">(</span><span class="n">Q</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">S</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Q</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">R</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Q</span><span class="o">),</span>
<span class="w">        </span><span class="n">v</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="n">x</span><span class="o">))</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="w">        </span><span class="c1">-- &#947;</span>
</pre></div>
</div>
</div><p>As expected, the expression <code class="docutils literal notranslate"><span class="pre">(&#955;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">x)</span> <span class="pre">a</span></code> has type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>. In fact, more should be true: applying the expression <code class="docutils literal notranslate"><span class="pre">(&#955;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">x)</span></code> to <code class="docutils literal notranslate"><span class="pre">a</span></code> should &#8220;return&#8221; the value <code class="docutils literal notranslate"><span class="pre">a</span></code>. And, indeed, it does:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=constants%20%CE%B1%20%CE%B2%20%CE%B3%20%3A%20Type%0Aconstant%20f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%0Aconstant%20g%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3%0Aconstant%20h%20%3A%20%CE%B1%20%E2%86%92%20%CE%B1%0Aconstants%20(a%20%3A%20%CE%B1)%20(b%20%3A%20%CE%B2)%0A%0A%23reduce%20(%CE%BB%20x%20%3A%20%CE%B1%2C%20x)%20a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20a%0A%23reduce%20(%CE%BB%20x%20%3A%20%CE%B1%2C%20b)%20a%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20b%0A%23reduce%20(%CE%BB%20x%20%3A%20%CE%B1%2C%20b)%20(h%20a)%20%20%20%20%20%20%20%20%20%20%20%20--%20b%0A%23reduce%20(%CE%BB%20x%20%3A%20%CE%B1%2C%20g%20(f%20x))%20a%20%20%20%20%20%20%20%20%20%20--%20g%20(f%20a)%0A%0A%23reduce%20(%CE%BB%20(v%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3)%20(u%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2)%20x%2C%20v%20(u%20x))%20g%20f%20a%20%20%20--%20g%20(f%20a)%0A%0A%23reduce%20(%CE%BB%20(Q%20R%20S%20%3A%20Type*)%20(v%20%3A%20R%20%E2%86%92%20S)%20(u%20%3A%20Q%20%E2%86%92%20R)%20(x%20%3A%20Q)%2C%0A%20%20%20%20%20%20%20v%20(u%20x))%20%CE%B1%20%CE%B2%20%CE%B3%20g%20f%20a%20%20%20%20%20%20%20%20--%20g%20(f%20a)" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">constants</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">constants</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span>

<span class="k">#reduce</span><span class="w"> </span><span class="o">(</span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="o">)</span><span class="w"> </span><span class="n">a</span><span class="w">                </span><span class="c1">-- a</span>
<span class="k">#reduce</span><span class="w"> </span><span class="o">(</span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="n">a</span><span class="w">                </span><span class="c1">-- b</span>
<span class="k">#reduce</span><span class="w"> </span><span class="o">(</span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="n">a</span><span class="o">)</span><span class="w">            </span><span class="c1">-- b</span>
<span class="k">#reduce</span><span class="w"> </span><span class="o">(</span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">,</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">))</span><span class="w"> </span><span class="n">a</span><span class="w">          </span><span class="c1">-- g (f a)</span>

<span class="k">#reduce</span><span class="w"> </span><span class="o">(</span><span class="bp">&#955;</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="n">x</span><span class="o">))</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="w">   </span><span class="c1">-- g (f a)</span>

<span class="k">#reduce</span><span class="w"> </span><span class="o">(</span><span class="bp">&#955;</span><span class="w"> </span><span class="o">(</span><span class="n">Q</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="n">S</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">v</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">R</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">S</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Q</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">R</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">Q</span><span class="o">),</span>
<span class="w">       </span><span class="n">v</span><span class="w"> </span><span class="o">(</span><span class="n">u</span><span class="w"> </span><span class="n">x</span><span class="o">))</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="w">        </span><span class="c1">-- g (f a)</span>
</pre></div>
</div>
</div><p>The command <code class="docutils literal notranslate"><span class="pre">#reduce</span></code> tells Lean to evaluate an expression by <em>reducing</em> it to normal form, which is to say, carrying out all the computational reductions that are sanctioned by the underlying logic. The process of simplifying an expression <code class="docutils literal notranslate"><span class="pre">(&#955;</span> <span class="pre">x,</span> <span class="pre">t)s</span></code> to <code class="docutils literal notranslate"><span class="pre">t[s/x]</span></code> &#8211; that is, <code class="docutils literal notranslate"><span class="pre">t</span></code> with <code class="docutils literal notranslate"><span class="pre">s</span></code> substituted for the variable <code class="docutils literal notranslate"><span class="pre">x</span></code> &#8211; is known as <em>beta reduction</em>, and two terms that beta reduce to a common term are called <em>beta equivalent</em>. But the <code class="docutils literal notranslate"><span class="pre">#reduce</span></code> command carries out other forms of reduction as well:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=constants%20m%20n%20%3A%20nat%0Aconstant%20b%20%3A%20bool%0A%0A%23print%20%22reducing%20pairs%22%0A%23reduce%20(m%2C%20n).1%20%20%20%20%20%20%20%20--%20m%0A%23reduce%20(m%2C%20n).2%20%20%20%20%20%20%20%20--%20n%0A%0A%23print%20%22reducing%20boolean%20expressions%22%0A%23reduce%20tt%20%26%26%20ff%20%20%20%20%20%20%20%20--%20ff%0A%23reduce%20ff%20%26%26%20b%20%20%20%20%20%20%20%20%20--%20ff%0A%23reduce%20b%20%26%26%20ff%20%20%20%20%20%20%20%20%20--%20bool.rec%20ff%20ff%20b%0A%0A%23print%20%22reducing%20arithmetic%20expressions%22%0A%23reduce%20n%20%2B%200%20%20%20%20%20%20%20%20%20%20%20--%20n%0A%23reduce%20n%20%2B%202%20%20%20%20%20%20%20%20%20%20%20--%20nat.succ%20(nat.succ%20n)%0A%23reduce%202%20%2B%203%20%20%20%20%20%20%20%20%20%20%20--%205" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">constants</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">nat</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">bool</span>

<span class="k">#print</span><span class="w"> </span><span class="s2">&quot;reducing pairs&quot;</span>
<span class="k">#reduce</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="o">,</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="w">        </span><span class="c1">-- m</span>
<span class="k">#reduce</span><span class="w"> </span><span class="o">(</span><span class="n">m</span><span class="o">,</span><span class="w"> </span><span class="n">n</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="w">        </span><span class="c1">-- n</span>

<span class="k">#print</span><span class="w"> </span><span class="s2">&quot;reducing boolean expressions&quot;</span>
<span class="k">#reduce</span><span class="w"> </span><span class="n">tt</span><span class="w"> </span><span class="bp">&amp;&amp;</span><span class="w"> </span><span class="n">ff</span><span class="w">        </span><span class="c1">-- ff</span>
<span class="k">#reduce</span><span class="w"> </span><span class="n">ff</span><span class="w"> </span><span class="bp">&amp;&amp;</span><span class="w"> </span><span class="n">b</span><span class="w">         </span><span class="c1">-- ff</span>
<span class="k">#reduce</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="bp">&amp;&amp;</span><span class="w"> </span><span class="n">ff</span><span class="w">         </span><span class="c1">-- bool.rec ff ff b</span>

<span class="k">#print</span><span class="w"> </span><span class="s2">&quot;reducing arithmetic expressions&quot;</span>
<span class="k">#reduce</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">0</span><span class="w">           </span><span class="c1">-- n</span>
<span class="k">#reduce</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">2</span><span class="w">           </span><span class="c1">-- nat.succ (nat.succ n)</span>
<span class="k">#reduce</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">3</span><span class="w">           </span><span class="c1">-- 5</span>
</pre></div>
</div>
</div><p>In a later chapter, we will explain how these terms are evaluated. For now, we only wish to emphasize that this is an important feature of dependent type theory: every term has a computational behavior, and supports a notion of reduction, or <em>normalization</em>. In principle, two terms that reduce to the same value are called <em>definitionally equal</em>. They are considered &#8220;the same&#8221; by the underlying logical framework, and Lean does its best to recognize and support these identifications.</p>
<p>It is this computational behavior that makes it possible to use Lean as a programming language as well. Indeed, Lean extracts bytecode from terms in a computationally pure fragment of the logical framework, and can evaluate them quite efficiently:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23eval%2012345%20*%2054321" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#eval</span><span class="w"> </span><span class="mi">12345</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="mi">54321</span>
</pre></div>
</div>
</div><p>In contrast, the <code class="docutils literal notranslate"><span class="pre">#reduce</span></code> command relies on Lean&#8217;s trusted kernel, the part of Lean that is responsible for checking and verifying the correctness of expressions and proofs. As such, the <code class="docutils literal notranslate"><span class="pre">#reduce</span></code> command is more trustworthy, but far less efficient. We will have more to say about <code class="docutils literal notranslate"><span class="pre">#eval</span></code> in <a class="reference internal" href="axioms_and_computation.html#axioms-and-computation"><span class="std std-numref">Chapter 11</span></a>, and it will play a central role in <a class="reference external" href="https://leanprover.github.io/programming_in_lean">Programming in Lean</a>. In this tutorial, however, we will generally rely on <code class="docutils literal notranslate"><span class="pre">#reduce</span></code> instead.</p>
</section>
<section id="introducing-definitions">
<span id="id2"></span><h2><span class="section-number">2.4. </span>Introducing Definitions<a class="headerlink" href="#introducing-definitions" title="Link to this heading">&#182;</a></h2>
<p>As we have noted above, declaring constants in the Lean environment is a good way to postulate new objects to experiment with, but most of the time what we really want to do is <em>define</em> objects in Lean and prove things about them. The <code class="docutils literal notranslate"><span class="pre">def</span></code> command provides one important way of defining new objects.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=def%20foo%20%3A%20(%E2%84%95%20%E2%86%92%20%E2%84%95)%20%E2%86%92%20%E2%84%95%20%3A%3D%20%CE%BB%20f%2C%20f%200%0A%0A%23check%20foo%20%20%20%20--%20(%E2%84%95%20%E2%86%92%20%E2%84%95)%20%E2%86%92%20%E2%84%95%0A%23print%20foo%20%20%20%20--%20%CE%BB%20(f%20%3A%20%E2%84%95%20%E2%86%92%20%E2%84%95)%2C%20f%200" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">f</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="mi">0</span>

<span class="k">#check</span><span class="w"> </span><span class="n">foo</span><span class="w">    </span><span class="c1">-- (&#8469; &#8594; &#8469;) &#8594; &#8469;</span>
<span class="k">#print</span><span class="w"> </span><span class="n">foo</span><span class="w">    </span><span class="c1">-- &#955; (f : &#8469; &#8594; &#8469;), f 0</span>
</pre></div>
</div>
</div><p>We can omit the type when Lean has enough information to infer it:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=def%20foo'%20%3A%3D%20%CE%BB%20f%20%3A%20%E2%84%95%20%E2%86%92%20%E2%84%95%2C%20f%200" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">foo&#39;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="mi">0</span>
</pre></div>
</div>
</div><p>The general form of a definition is <code class="docutils literal notranslate"><span class="pre">def</span> <span class="pre">foo</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">:=</span> <span class="pre">bar</span></code>. Lean can usually infer the type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, but it is often a good idea to write it explicitly. This clarifies your intention, and Lean will flag an error if the right-hand side of the definition does not have the right type.</p>
<p>Lean also allows us to use an alternative format that puts the abstracted variables before the colon and omits the lambda:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=def%20double%20(x%20%3A%20%E2%84%95)%20%3A%20%E2%84%95%20%3A%3D%20x%20%2B%20x%0A%23print%20double%0A%23check%20double%203%0A%23reduce%20double%203%20%20%20%20--%206%0A%0Adef%20square%20(x%20%3A%20%E2%84%95)%20%3A%3D%20x%20*%20x%0A%23print%20square%0A%23check%20square%203%0A%23reduce%20square%203%20%20%20%20--%209%0A%0Adef%20do_twice%20(f%20%3A%20%E2%84%95%20%E2%86%92%20%E2%84%95)%20(x%20%3A%20%E2%84%95)%20%3A%20%E2%84%95%20%3A%3D%20f%20(f%20x)%0A%0A%23reduce%20do_twice%20double%202%20%20%20%20--%208" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">x</span>
<span class="k">#print</span><span class="w"> </span><span class="n">double</span>
<span class="k">#check</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="mi">3</span>
<span class="k">#reduce</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="mi">3</span><span class="w">    </span><span class="c1">-- 6</span>

<span class="kd">def</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">x</span>
<span class="k">#print</span><span class="w"> </span><span class="n">square</span>
<span class="k">#check</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="mi">3</span>
<span class="k">#reduce</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="mi">3</span><span class="w">    </span><span class="c1">-- 9</span>

<span class="kd">def</span><span class="w"> </span><span class="n">do_twice</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>

<span class="k">#reduce</span><span class="w"> </span><span class="n">do_twice</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="mi">2</span><span class="w">    </span><span class="c1">-- 8</span>
</pre></div>
</div>
</div><p>These definitions are equivalent to the following:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=def%20double%20%3A%20%E2%84%95%20%E2%86%92%20%E2%84%95%20%3A%3D%20%CE%BB%20x%2C%20x%20%2B%20x%0Adef%20square%20%3A%20%E2%84%95%20%E2%86%92%20%E2%84%95%20%3A%3D%20%CE%BB%20x%2C%20x%20*%20x%0Adef%20do_twice%20%3A%20(%E2%84%95%20%E2%86%92%20%E2%84%95)%20%E2%86%92%20%E2%84%95%20%E2%86%92%20%E2%84%95%20%3A%3D%20%CE%BB%20f%20x%2C%20f%20(f%20x)" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">double</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">x</span>
<span class="kd">def</span><span class="w"> </span><span class="n">square</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">x</span>
<span class="kd">def</span><span class="w"> </span><span class="n">do_twice</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="o">(</span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">,</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
</pre></div>
</div>
</div><p>We can even use this approach to specify arguments that are types:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=def%20compose%20(%CE%B1%20%CE%B2%20%CE%B3%20%3A%20Type*)%20(g%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3)%20(f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2)%20(x%20%3A%20%CE%B1)%20%3A%0A%20%20%CE%B3%20%3A%3D%0Ag%20(f%20x)" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">compose</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:=</span>
<span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
</pre></div>
</div>
</div><p>As an exercise, we encourage you to use <code class="docutils literal notranslate"><span class="pre">do_twice</span></code> and <code class="docutils literal notranslate"><span class="pre">double</span></code> to define functions that quadruple their input, and multiply the input by 8. As a further exercise, we encourage you to try defining a function <code class="docutils literal notranslate"><span class="pre">Do_Twice</span> <span class="pre">:</span> <span class="pre">((&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8469;)</span> <span class="pre">&#8594;</span> <span class="pre">(&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8469;))</span> <span class="pre">&#8594;</span> <span class="pre">(&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8469;)</span> <span class="pre">&#8594;</span> <span class="pre">(&#8469;</span> <span class="pre">&#8594;</span> <span class="pre">&#8469;)</span></code> which applies <em>its</em> argument twice, so that <code class="docutils literal notranslate"><span class="pre">Do_Twice</span> <span class="pre">do_twice</span></code> is a function that applies its input four times. Then evaluate <code class="docutils literal notranslate"><span class="pre">Do_Twice</span> <span class="pre">do_twice</span> <span class="pre">double</span> <span class="pre">2</span></code>.</p>
<p>Above, we discussed the process of &#8220;currying&#8221; a function, that is, taking a function <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">(a,</span> <span class="pre">b)</span></code> that takes an ordered pair as an argument, and recasting it as a function <code class="docutils literal notranslate"><span class="pre">f'</span> <span class="pre">a</span> <span class="pre">b</span></code> that takes two arguments successively. As another exercise, we encourage you to complete the following definitions, which &#8220;curry&#8221; and &#8220;uncurry&#8221; a
function.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=def%20curry%20(%CE%B1%20%CE%B2%20%CE%B3%20%3A%20Type*)%20(f%20%3A%20%CE%B1%20%C3%97%20%CE%B2%20%E2%86%92%20%CE%B3)%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%20%E2%86%92%20%CE%B3%20%3A%3D%20sorry%0A%0Adef%20uncurry%20(%CE%B1%20%CE%B2%20%CE%B3%20%3A%20Type*)%20(f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2%20%E2%86%92%20%CE%B3)%20%3A%20%CE%B1%20%C3%97%20%CE%B2%20%E2%86%92%20%CE%B3%20%3A%3D%20sorry" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">curry</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>

<span class="kd">def</span><span class="w"> </span><span class="n">uncurry</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#215;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="gr">sorry</span>
</pre></div>
</div>
</div></section>
<section id="local-definitions">
<h2><span class="section-number">2.5. </span>Local Definitions<a class="headerlink" href="#local-definitions" title="Link to this heading">&#182;</a></h2>
<p>Lean also allows you to introduce &#8220;local&#8221; definitions using the <code class="docutils literal notranslate"><span class="pre">let</span></code> construct. The expression <code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">a</span> <span class="pre">:=</span> <span class="pre">t1</span> <span class="pre">in</span> <span class="pre">t2</span></code> is definitionally equal to the result of replacing every occurrence of <code class="docutils literal notranslate"><span class="pre">a</span></code> in <code class="docutils literal notranslate"><span class="pre">t2</span></code> by <code class="docutils literal notranslate"><span class="pre">t1</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23check%20let%20y%20%3A%3D%202%20%2B%202%20in%20y%20*%20y%20%20%20--%20%E2%84%95%0A%23reduce%20%20let%20y%20%3A%3D%202%20%2B%202%20in%20y%20*%20y%20%20%20--%2016%0A%0Adef%20t%20(x%20%3A%20%E2%84%95)%20%3A%20%E2%84%95%20%3A%3D%0Alet%20y%20%3A%3D%20x%20%2B%20x%20in%20y%20*%20y%0A%0A%23reduce%20t%202%20%20%20--%2016" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="k">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y</span><span class="w">   </span><span class="c1">-- &#8469;</span>
<span class="k">#reduce</span><span class="w">  </span><span class="k">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y</span><span class="w">   </span><span class="c1">-- 16</span>

<span class="kd">def</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span>
<span class="k">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">y</span>

<span class="k">#reduce</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="mi">2</span><span class="w">   </span><span class="c1">-- 16</span>
</pre></div>
</div>
</div><p>Here, <code class="docutils literal notranslate"><span class="pre">t</span></code> is definitionally equal to the term <code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">+</span> <span class="pre">x)</span> <span class="pre">*</span> <span class="pre">(x</span> <span class="pre">+</span> <span class="pre">x)</span></code>. You can combine multiple assignments in a single <code class="docutils literal notranslate"><span class="pre">let</span></code> statement:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23check%20%20%20let%20y%20%3A%3D%202%20%2B%202%2C%20z%20%3A%3D%20y%20%2B%20y%20in%20z%20*%20z%20%20%20--%20%E2%84%95%0A%23reduce%20%20let%20y%20%3A%3D%202%20%2B%202%2C%20z%20%3A%3D%20y%20%2B%20y%20in%20z%20*%20z%20%20%20--%2064" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w">   </span><span class="k">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">z</span><span class="w">   </span><span class="c1">-- &#8469;</span>
<span class="k">#reduce</span><span class="w">  </span><span class="k">let</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="k">in</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="bp">*</span><span class="w"> </span><span class="n">z</span><span class="w">   </span><span class="c1">-- 64</span>
</pre></div>
</div>
</div><p>Notice that the meaning of the expression <code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">a</span> <span class="pre">:=</span> <span class="pre">t1</span> <span class="pre">in</span> <span class="pre">t2</span></code> is very similar to the meaning of <code class="docutils literal notranslate"><span class="pre">(&#955;</span> <span class="pre">a,</span> <span class="pre">t2)</span> <span class="pre">t1</span></code>, but the two are not the same. In the first expression, you should think of every instance of <code class="docutils literal notranslate"><span class="pre">a</span></code> in <code class="docutils literal notranslate"><span class="pre">t2</span></code> as a syntactic abbreviation for <code class="docutils literal notranslate"><span class="pre">t1</span></code>. In the second expression, <code class="docutils literal notranslate"><span class="pre">a</span></code> is a variable, and the expression <code class="docutils literal notranslate"><span class="pre">&#955;</span> <span class="pre">a,</span> <span class="pre">t2</span></code> has to make sense independently of the value of <code class="docutils literal notranslate"><span class="pre">a</span></code>. The <code class="docutils literal notranslate"><span class="pre">let</span></code> construct is a stronger means of abbreviation, and there are expressions of the form <code class="docutils literal notranslate"><span class="pre">let</span> <span class="pre">a</span> <span class="pre">:=</span> <span class="pre">t1</span> <span class="pre">in</span> <span class="pre">t2</span></code> that cannot be expressed as <code class="docutils literal notranslate"><span class="pre">(&#955;</span> <span class="pre">a,</span> <span class="pre">t2)</span> <span class="pre">t1</span></code>. As an exercise, try to understand why the definition of <code class="docutils literal notranslate"><span class="pre">foo</span></code> below type checks, but the definition of <code class="docutils literal notranslate"><span class="pre">bar</span></code> does not.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=def%20foo%20%3A%3D%20let%20a%20%3A%3D%20nat%20%20in%20%CE%BB%20x%20%3A%20a%2C%20x%20%2B%202%0A%0A%2F-%0Adef%20bar%20%3A%3D%20(%CE%BB%20a%2C%20%CE%BB%20x%20%3A%20a%2C%20x%20%2B%202)%20nat%0A-%2F" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="k">let</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">nat</span><span class="w">  </span><span class="k">in</span><span class="w"> </span><span class="bp">&#955;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">2</span>

<span class="c">/-</span>
<span class="cm">def bar := (&#955; a, &#955; x : a, x + 2) nat</span>
<span class="cm">-/</span>
</pre></div>
</div>
</div></section>
<section id="variables-and-sections">
<span id="id3"></span><h2><span class="section-number">2.6. </span>Variables and Sections<a class="headerlink" href="#variables-and-sections" title="Link to this heading">&#182;</a></h2>
<p>This is a good place to introduce some organizational features of Lean that are not a part of the axiomatic framework <em>per se</em>, but make it possible to work in the framework more efficiently.</p>
<p>We have seen that the <code class="docutils literal notranslate"><span class="pre">constant</span></code> command allows us to declare new objects, which then become part of the global context. Declaring new objects in this way is somewhat crass. Lean enables us to <em>define</em> all of the mathematical objects we need, and <em>declaring</em> new objects willy-nilly is therefore somewhat lazy. In the words of Bertrand Russell, it has all the advantages of theft over honest toil. We will see in the next chapter that it is also somewhat dangerous: declaring a new constant is tantamount to declaring an axiomatic extension of our foundational system, and may result in inconsistency.</p>
<p>So far, in this tutorial, we have used the <code class="docutils literal notranslate"><span class="pre">constant</span></code> command to create &#8220;arbitrary&#8221; objects to work with in our examples. For example, we have declared types <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, <code class="docutils literal notranslate"><span class="pre">&#946;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&#947;</span></code> to populate our context. This can be avoided, using implicit or explicit lambda abstraction in our definitions to declare such objects &#8220;locally&#8221;:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=def%20compose%20(%CE%B1%20%CE%B2%20%CE%B3%20%3A%20Type*)%20(g%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3)%20(f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2)%20(x%20%3A%20%CE%B1)%20%3A%0A%20%20%CE%B3%20%3A%3D%20g%20(f%20x)%0A%0Adef%20do_twice%20(%CE%B1%20%3A%20Type*)%20(h%20%3A%20%CE%B1%20%E2%86%92%20%CE%B1)%20(x%20%3A%20%CE%B1)%20%3A%20%CE%B1%20%3A%3D%20h%20(h%20x)%0A%0Adef%20do_thrice%20(%CE%B1%20%3A%20Type*)%20(h%20%3A%20%CE%B1%20%E2%86%92%20%CE%B1)%20(x%20%3A%20%CE%B1)%20%3A%20%CE%B1%20%3A%3D%20h%20(h%20(h%20x))" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">def</span><span class="w"> </span><span class="n">compose</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>

<span class="kd">def</span><span class="w"> </span><span class="n">do_twice</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>

<span class="kd">def</span><span class="w"> </span><span class="n">do_thrice</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="n">x</span><span class="o">))</span>
</pre></div>
</div>
</div><p>Repeating declarations in this way can be tedious, however. Lean provides us with the <code class="docutils literal notranslate"><span class="pre">variable</span></code> and <code class="docutils literal notranslate"><span class="pre">variables</span></code> commands to make such declarations look global:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variables%20(%CE%B1%20%CE%B2%20%CE%B3%20%3A%20Type*)%0A%0Adef%20compose%20(g%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3)%20(f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2)%20(x%20%3A%20%CE%B1)%20%3A%20%CE%B3%20%3A%3D%20g%20(f%20x)%0Adef%20do_twice%20(h%20%3A%20%CE%B1%20%E2%86%92%20%CE%B1)%20(x%20%3A%20%CE%B1)%20%3A%20%CE%B1%20%3A%3D%20h%20(h%20x)%0Adef%20do_thrice%20(h%20%3A%20%CE%B1%20%E2%86%92%20%CE%B1)%20(x%20%3A%20%CE%B1)%20%3A%20%CE%B1%20%3A%3D%20h%20(h%20(h%20x))" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variables</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>

<span class="kd">def</span><span class="w"> </span><span class="n">compose</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
<span class="kd">def</span><span class="w"> </span><span class="n">do_twice</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
<span class="kd">def</span><span class="w"> </span><span class="n">do_thrice</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="n">x</span><span class="o">))</span>
</pre></div>
</div>
</div><p>We can declare variables of any type, not just <code class="docutils literal notranslate"><span class="pre">Type</span></code> itself:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variables%20(%CE%B1%20%CE%B2%20%CE%B3%20%3A%20Type*)%0Avariables%20(g%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3)%20(f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2)%20(h%20%3A%20%CE%B1%20%E2%86%92%20%CE%B1)%0Avariable%20x%20%3A%20%CE%B1%0A%0Adef%20compose%20%3A%3D%20g%20(f%20x)%0Adef%20do_twice%20%3A%3D%20h%20(h%20x)%0Adef%20do_thrice%20%3A%3D%20h%20(h%20(h%20x))%0A%0A%23print%20compose%0A%23print%20do_twice%0A%23print%20do_thrice" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variables</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="kd">variables</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>
<span class="kd">variable</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span>

<span class="kd">def</span><span class="w"> </span><span class="n">compose</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
<span class="kd">def</span><span class="w"> </span><span class="n">do_twice</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
<span class="kd">def</span><span class="w"> </span><span class="n">do_thrice</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="n">x</span><span class="o">))</span>

<span class="k">#print</span><span class="w"> </span><span class="n">compose</span>
<span class="k">#print</span><span class="w"> </span><span class="n">do_twice</span>
<span class="k">#print</span><span class="w"> </span><span class="n">do_thrice</span>
</pre></div>
</div>
</div><p>Printing them out shows that all three groups of definitions have exactly the same effect.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">variable</span></code> and <code class="docutils literal notranslate"><span class="pre">variables</span></code> commands look like the <code class="docutils literal notranslate"><span class="pre">constant</span></code> and <code class="docutils literal notranslate"><span class="pre">constants</span></code> commands we have used above, but there is an important difference. Rather than creating permanent entities, the former commands simply instruct Lean to insert the declared variables as bound variables in definitions that refer to them. Lean is smart enough to figure out which variables are used explicitly or implicitly in a definition. We can therefore proceed as though <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, <code class="docutils literal notranslate"><span class="pre">&#946;</span></code>, <code class="docutils literal notranslate"><span class="pre">&#947;</span></code>, <code class="docutils literal notranslate"><span class="pre">g</span></code>, <code class="docutils literal notranslate"><span class="pre">f</span></code>, <code class="docutils literal notranslate"><span class="pre">h</span></code>, and <code class="docutils literal notranslate"><span class="pre">x</span></code> are fixed objects when we write our definitions, and let Lean abstract the definitions for us automatically.</p>
<p>When declared in this way, a variable stays in scope until the end of the file we are working on, and we cannot declare another variable with the same name. Sometimes, however, it is useful to limit the scope of a variable. For that purpose, Lean provides the notion of a <code class="docutils literal notranslate"><span class="pre">section</span></code>:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=section%20useful%0Avariables%20(%CE%B1%20%CE%B2%20%CE%B3%20%3A%20Type*)%0Avariables%20(g%20%3A%20%CE%B2%20%E2%86%92%20%CE%B3)%20(f%20%3A%20%CE%B1%20%E2%86%92%20%CE%B2)%20(h%20%3A%20%CE%B1%20%E2%86%92%20%CE%B1)%0Avariable%20x%20%3A%20%CE%B1%0A%0Adef%20compose%20%3A%3D%20g%20(f%20x)%0Adef%20do_twice%20%3A%3D%20h%20(h%20x)%0Adef%20do_thrice%20%3A%3D%20h%20(h%20(h%20x))%0Aend%20useful" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">section</span><span class="w"> </span><span class="n">useful</span>
<span class="kd">variables</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">&#947;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="bp">*</span><span class="o">)</span>
<span class="kd">variables</span><span class="w"> </span><span class="o">(</span><span class="n">g</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#947;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>
<span class="kd">variable</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span>

<span class="kd">def</span><span class="w"> </span><span class="n">compose</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
<span class="kd">def</span><span class="w"> </span><span class="n">do_twice</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="n">x</span><span class="o">)</span>
<span class="kd">def</span><span class="w"> </span><span class="n">do_thrice</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="o">(</span><span class="n">h</span><span class="w"> </span><span class="n">x</span><span class="o">))</span>
<span class="kd">end</span><span class="w"> </span><span class="n">useful</span>
</pre></div>
</div>
</div><p>When the section is closed, the variables go out of scope, and become nothing more than a distant memory.</p>
<p>You do not have to indent the lines within a section, since Lean treats any string of returns, spaces, and tabs equivalently as whitespace. Nor do you have to name a section, which is to say, you can use an anonymous <code class="docutils literal notranslate"><span class="pre">section</span></code> / <code class="docutils literal notranslate"><span class="pre">end</span></code> pair. If you do name a section, however, you have to close it using the same name. Sections can also be nested, which allows you to declare new variables incrementally.</p>
<p>We will see in <a class="reference internal" href="interacting_with_lean.html#interacting-with-lean"><span class="std std-numref">Chapter 6</span></a> that, as a scoping mechanism, sections govern more than just variables; other commands have effects that are only operant in the current section. Similarly, if we use the <code class="docutils literal notranslate"><span class="pre">open</span></code> command inside a section, it only remains in effect until that section is closed.</p>
</section>
<section id="namespaces">
<span id="id4"></span><h2><span class="section-number">2.7. </span>Namespaces<a class="headerlink" href="#namespaces" title="Link to this heading">&#182;</a></h2>
<p>Lean provides us with the ability to group definitions into nested, hierarchical <em>namespaces</em>:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20foo%0Adef%20a%20%3A%20%E2%84%95%20%3A%3D%205%0Adef%20f%20(x%20%3A%20%E2%84%95)%20%3A%20%E2%84%95%20%3A%3D%20x%20%2B%207%0A%0Adef%20fa%20%3A%20%E2%84%95%20%3A%3D%20f%20a%0Adef%20ffa%20%3A%20%E2%84%95%20%3A%3D%20f%20(f%20a)%0A%0A%23print%20%22inside%20foo%22%0A%0A%23check%20a%0A%23check%20f%0A%23check%20fa%0A%23check%20ffa%0A%23check%20foo.fa%0Aend%20foo%0A%0A%23print%20%22outside%20the%20namespace%22%0A%0A--%20%23check%20a%20%20--%20error%0A--%20%23check%20f%20%20--%20error%0A%23check%20foo.a%0A%23check%20foo.f%0A%23check%20foo.fa%0A%23check%20foo.ffa%0A%0Aopen%20foo%0A%0A%23print%20%22opened%20foo%22%0A%0A%23check%20a%0A%23check%20f%0A%23check%20fa%0A%23check%20foo.fa" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="n">foo</span>
<span class="kd">def</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">5</span>
<span class="kd">def</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">7</span>

<span class="kd">def</span><span class="w"> </span><span class="n">fa</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span>
<span class="kd">def</span><span class="w"> </span><span class="n">ffa</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="o">)</span>

<span class="k">#print</span><span class="w"> </span><span class="s2">&quot;inside foo&quot;</span>

<span class="k">#check</span><span class="w"> </span><span class="n">a</span>
<span class="k">#check</span><span class="w"> </span><span class="n">f</span>
<span class="k">#check</span><span class="w"> </span><span class="n">fa</span>
<span class="k">#check</span><span class="w"> </span><span class="n">ffa</span>
<span class="k">#check</span><span class="w"> </span><span class="n">foo.fa</span>
<span class="kd">end</span><span class="w"> </span><span class="n">foo</span>

<span class="k">#print</span><span class="w"> </span><span class="s2">&quot;outside the namespace&quot;</span>

<span class="c1">-- #check a  -- error</span>
<span class="c1">-- #check f  -- error</span>
<span class="k">#check</span><span class="w"> </span><span class="n">foo.a</span>
<span class="k">#check</span><span class="w"> </span><span class="n">foo.f</span>
<span class="k">#check</span><span class="w"> </span><span class="n">foo.fa</span>
<span class="k">#check</span><span class="w"> </span><span class="n">foo.ffa</span>

<span class="kn">open</span><span class="w"> </span><span class="n">foo</span>

<span class="k">#print</span><span class="w"> </span><span class="s2">&quot;opened foo&quot;</span>

<span class="k">#check</span><span class="w"> </span><span class="n">a</span>
<span class="k">#check</span><span class="w"> </span><span class="n">f</span>
<span class="k">#check</span><span class="w"> </span><span class="n">fa</span>
<span class="k">#check</span><span class="w"> </span><span class="n">foo.fa</span>
</pre></div>
</div>
</div><p>When we declare that we are working in the namespace <code class="docutils literal notranslate"><span class="pre">foo</span></code>, every identifier we declare has a full name with prefix &#8220;<code class="docutils literal notranslate"><span class="pre">foo.</span></code>&#8221; Within the namespace, we can refer to identifiers by their shorter names, but once we end the namespace, we have to use the longer names.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">open</span></code> command brings the shorter names into the current context. Often, when we import a theory file, we will want to open one or more of the namespaces it contains, to have access to the short identifiers. But sometimes we will want to leave this information hidden, for example, when they conflict with identifiers in another namespace we want to use. Thus namespaces give us a way to manage our working environment.</p>
<p>For example, Lean groups definitions and theorems involving lists into a namespace <code class="docutils literal notranslate"><span class="pre">list</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23check%20list.nil%0A%23check%20list.cons%0A%23check%20list.append" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">list.nil</span>
<span class="k">#check</span><span class="w"> </span><span class="n">list.cons</span>
<span class="k">#check</span><span class="w"> </span><span class="n">list.append</span>
</pre></div>
</div>
</div><p>We will discuss their types, below. The command <code class="docutils literal notranslate"><span class="pre">open</span> <span class="pre">list</span></code> allows us to use the shorter names:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=open%20list%0A%0A%23check%20nil%0A%23check%20cons%0A%23check%20append" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">list</span>

<span class="k">#check</span><span class="w"> </span><span class="n">nil</span>
<span class="k">#check</span><span class="w"> </span><span class="n">cons</span>
<span class="k">#check</span><span class="w"> </span><span class="n">append</span>
</pre></div>
</div>
</div><p>Like sections, namespaces can be nested:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20foo%0Adef%20a%20%3A%20%E2%84%95%20%3A%3D%205%0Adef%20f%20(x%20%3A%20%E2%84%95)%20%3A%20%E2%84%95%20%3A%3D%20x%20%2B%207%0A%0Adef%20fa%20%3A%20%E2%84%95%20%3A%3D%20f%20a%0A%0Anamespace%20bar%0Adef%20ffa%20%3A%20%E2%84%95%20%3A%3D%20f%20(f%20a)%0A%0A%23check%20fa%0A%23check%20ffa%0Aend%20bar%0A%0A%23check%20fa%0A%23check%20bar.ffa%0Aend%20foo%0A%0A%23check%20foo.fa%0A%23check%20foo.bar.ffa%0A%0Aopen%20foo%0A%0A%23check%20fa%0A%23check%20bar.ffa" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="n">foo</span>
<span class="kd">def</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">5</span>
<span class="kd">def</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">7</span>

<span class="kd">def</span><span class="w"> </span><span class="n">fa</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span>

<span class="kn">namespace</span><span class="w"> </span><span class="n">bar</span>
<span class="kd">def</span><span class="w"> </span><span class="n">ffa</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="n">fa</span>
<span class="k">#check</span><span class="w"> </span><span class="n">ffa</span>
<span class="kd">end</span><span class="w"> </span><span class="n">bar</span>

<span class="k">#check</span><span class="w"> </span><span class="n">fa</span>
<span class="k">#check</span><span class="w"> </span><span class="n">bar.ffa</span>
<span class="kd">end</span><span class="w"> </span><span class="n">foo</span>

<span class="k">#check</span><span class="w"> </span><span class="n">foo.fa</span>
<span class="k">#check</span><span class="w"> </span><span class="n">foo.bar.ffa</span>

<span class="kn">open</span><span class="w"> </span><span class="n">foo</span>

<span class="k">#check</span><span class="w"> </span><span class="n">fa</span>
<span class="k">#check</span><span class="w"> </span><span class="n">bar.ffa</span>
</pre></div>
</div>
</div><p>Namespaces that have been closed can later be reopened, even in another file:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20foo%0Adef%20a%20%3A%20%E2%84%95%20%3A%3D%205%0Adef%20f%20(x%20%3A%20%E2%84%95)%20%3A%20%E2%84%95%20%3A%3D%20x%20%2B%207%0A%0Adef%20fa%20%3A%20%E2%84%95%20%3A%3D%20f%20a%0Aend%20foo%0A%0A%23check%20foo.a%0A%23check%20foo.f%0A%0Anamespace%20foo%0Adef%20ffa%20%3A%20%E2%84%95%20%3A%3D%20f%20(f%20a)%0Aend%20foo" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="n">foo</span>
<span class="kd">def</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="mi">5</span>
<span class="kd">def</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">7</span>

<span class="kd">def</span><span class="w"> </span><span class="n">fa</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="n">a</span>
<span class="kd">end</span><span class="w"> </span><span class="n">foo</span>

<span class="k">#check</span><span class="w"> </span><span class="n">foo.a</span>
<span class="k">#check</span><span class="w"> </span><span class="n">foo.f</span>

<span class="kn">namespace</span><span class="w"> </span><span class="n">foo</span>
<span class="kd">def</span><span class="w"> </span><span class="n">ffa</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">f</span><span class="w"> </span><span class="o">(</span><span class="n">f</span><span class="w"> </span><span class="n">a</span><span class="o">)</span>
<span class="kd">end</span><span class="w"> </span><span class="n">foo</span>
</pre></div>
</div>
</div><p>Like sections, nested namespaces have to be closed in the order they are opened. Also, a namespace cannot be declared within a section; namespaces have to live on the outer levels.</p>
<p>Namespaces and sections serve different purposes: namespaces organize data and sections declare variables for insertion in theorems. In many respects, however, a <code class="docutils literal notranslate"><span class="pre">namespace</span> <span class="pre">...</span> <span class="pre">end</span></code> block behaves the same as a <code class="docutils literal notranslate"><span class="pre">section</span> <span class="pre">...</span> <span class="pre">end</span></code> block. In particular, if you use the <code class="docutils literal notranslate"><span class="pre">variable</span></code> command within a namespace, its scope is limited to the namespace. Similarly, if you use an <code class="docutils literal notranslate"><span class="pre">open</span></code> command within a namespace, its effects disappear when the namespace is closed.</p>
</section>
<section id="dependent-types">
<span id="id5"></span><h2><span class="section-number">2.8. </span>Dependent Types<a class="headerlink" href="#dependent-types" title="Link to this heading">&#182;</a></h2>
<p>You have now seen one way of defining functions and objects in Lean, and we will gradually introduce you to many more. But an important goal in Lean is to <em>prove</em> things about the objects we define, and the next chapter will introduce you to Lean&#8217;s mechanisms for stating theorems and constructing proofs. Meanwhile, let us remain on the topic of defining objects in dependent type theory for just a moment longer. In this section, we will explain what makes dependent type theory <em>dependent</em>, and why dependent types are useful.</p>
<p>The short explanation is that what makes dependent type theory dependent is that types can depend on parameters. You have already seen a nice example of this: the type <code class="docutils literal notranslate"><span class="pre">list</span> <span class="pre">&#945;</span></code> depends on the argument <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, and this dependence is what distinguishes <code class="docutils literal notranslate"><span class="pre">list</span> <span class="pre">&#8469;</span></code> and <code class="docutils literal notranslate"><span class="pre">list</span> <span class="pre">bool</span></code>. For another example, consider the type <code class="docutils literal notranslate"><span class="pre">vec</span> <span class="pre">&#945;</span> <span class="pre">n</span></code>, the type of vectors of elements of <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> of length <code class="docutils literal notranslate"><span class="pre">n</span></code>. This type depends on <em>two</em> parameters: the type <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">:</span> <span class="pre">Type</span></code> of the elements in the vector and the length <code class="docutils literal notranslate"><span class="pre">n</span> <span class="pre">:</span> <span class="pre">&#8469;</span></code>.</p>
<p>Suppose we wish to write a function <code class="docutils literal notranslate"><span class="pre">cons</span></code> which inserts a new element at the head of a list. What type should <code class="docutils literal notranslate"><span class="pre">cons</span></code> have? Such a function is <em>polymorphic</em>: we expect the <code class="docutils literal notranslate"><span class="pre">cons</span></code> function for <code class="docutils literal notranslate"><span class="pre">&#8469;</span></code>, <code class="docutils literal notranslate"><span class="pre">bool</span></code>, or an arbitrary type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> to behave the same way. So it makes sense to take the type to be the first argument to <code class="docutils literal notranslate"><span class="pre">cons</span></code>, so that for any type, <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, <code class="docutils literal notranslate"><span class="pre">cons</span> <span class="pre">&#945;</span></code> is the insertion function for lists of type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>. In other words, for every <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, <code class="docutils literal notranslate"><span class="pre">cons</span> <span class="pre">&#945;</span></code> is the function that takes an element <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> and a list <code class="docutils literal notranslate"><span class="pre">l</span> <span class="pre">:</span> <span class="pre">list</span> <span class="pre">&#945;</span></code>, and returns a new list, so we have <code class="docutils literal notranslate"><span class="pre">cons</span> <span class="pre">&#945;</span> <span class="pre">a</span> <span class="pre">l</span> <span class="pre">:</span> <span class="pre">list</span> <span class="pre">&#945;</span></code>.</p>
<p>It is clear that <code class="docutils literal notranslate"><span class="pre">cons</span> <span class="pre">&#945;</span></code> should have type <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">list</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">list</span> <span class="pre">&#945;</span></code>. But what type should <code class="docutils literal notranslate"><span class="pre">cons</span></code> have? A first guess might be <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">&#8594;</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">list</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">list</span> <span class="pre">&#945;</span></code>, but, on reflection, this does not make sense: the <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> in this expression does not refer to anything, whereas it should refer to the argument of type <code class="docutils literal notranslate"><span class="pre">Type</span></code>. In other words, <em>assuming</em> <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">:</span> <span class="pre">Type</span></code> is the first argument to the function, the type of the next two elements are <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> and <code class="docutils literal notranslate"><span class="pre">list</span> <span class="pre">&#945;</span></code>. These types vary depending on the first argument, <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>.</p>
<p>This is an instance of a <em>Pi type</em>, or <em>dependent function type</em>. Given <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">:</span> <span class="pre">Type</span></code> and <code class="docutils literal notranslate"><span class="pre">&#946;</span> <span class="pre">:</span> <span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">Type</span></code>, think of <code class="docutils literal notranslate"><span class="pre">&#946;</span></code> as a family of types over <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, that is, a type <code class="docutils literal notranslate"><span class="pre">&#946;</span> <span class="pre">a</span></code> for each <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">:</span> <span class="pre">&#945;</span></code>. In that case, the type <code class="docutils literal notranslate"><span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span> <span class="pre">x</span></code> denotes the type of functions <code class="docutils literal notranslate"><span class="pre">f</span></code> with the property that, for each <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">:</span> <span class="pre">&#945;</span></code>, <code class="docutils literal notranslate"><span class="pre">f</span> <span class="pre">a</span></code> is an element of <code class="docutils literal notranslate"><span class="pre">&#946;</span> <span class="pre">a</span></code>. In other words, the type of the value returned by <code class="docutils literal notranslate"><span class="pre">f</span></code> depends on its input.</p>
<p>Notice that <code class="docutils literal notranslate"><span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span></code> makes sense for any expression <code class="docutils literal notranslate"><span class="pre">&#946;</span> <span class="pre">:</span> <span class="pre">Type</span></code>. When the value of <code class="docutils literal notranslate"><span class="pre">&#946;</span></code> depends on <code class="docutils literal notranslate"><span class="pre">x</span></code> (as does, for example, the expression <code class="docutils literal notranslate"><span class="pre">&#946;</span> <span class="pre">x</span></code> in the previous paragraph), <code class="docutils literal notranslate"><span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span></code> denotes a dependent function type. When <code class="docutils literal notranslate"><span class="pre">&#946;</span></code> doesn&#8217;t depend on <code class="docutils literal notranslate"><span class="pre">x</span></code>, <code class="docutils literal notranslate"><span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span></code> is no different from the type <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code>. Indeed, in dependent type theory (and in Lean), the Pi construction is fundamental, and <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code> is just notation for <code class="docutils literal notranslate"><span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span></code> when <code class="docutils literal notranslate"><span class="pre">&#946;</span></code> does not depend on <code class="docutils literal notranslate"><span class="pre">x</span></code>.</p>
<p>Returning to the example of lists, we can model some basic list operations as follows. We use <code class="docutils literal notranslate"><span class="pre">namespace</span> <span class="pre">hidden</span></code> to avoid a naming conflict with the <code class="docutils literal notranslate"><span class="pre">list</span></code> type defined in the standard library.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20hidden%0A%0Auniverse%20u%0A%0Aconstant%20list%20%20%20%3A%20Type%20u%20%E2%86%92%20Type%20u%0A%0Aconstant%20cons%20%20%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20%CE%B1%20%E2%86%92%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%0Aconstant%20nil%20%20%20%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20list%20%CE%B1%0Aconstant%20head%20%20%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20list%20%CE%B1%20%E2%86%92%20%CE%B1%0Aconstant%20tail%20%20%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%0Aconstant%20append%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%0A%0Aend%20hidden" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="n">hidden</span>

<span class="kd">universe</span><span class="w"> </span><span class="n">u</span>

<span class="kd">constant</span><span class="w"> </span><span class="n">list</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span>

<span class="kd">constant</span><span class="w"> </span><span class="n">cons</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">,</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">nil</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">,</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">head</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">,</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">tail</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">,</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">,</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span>

<span class="kd">end</span><span class="w"> </span><span class="n">hidden</span>
</pre></div>
</div>
</div><p>You can enter the symbol <code class="docutils literal notranslate"><span class="pre">&#928;</span></code> by typing <code class="docutils literal notranslate"><span class="pre">\Pi</span></code>. Here, <code class="docutils literal notranslate"><span class="pre">nil</span></code> is intended to denote the empty list, <code class="docutils literal notranslate"><span class="pre">head</span></code> and <code class="docutils literal notranslate"><span class="pre">tail</span></code> return the first element of a list and the remainder, respectively. The constant <code class="docutils literal notranslate"><span class="pre">append</span></code> is intended to denote the function that concatenates two lists.</p>
<p>We emphasize that these constant declarations are only for the purposes of illustration. The <code class="docutils literal notranslate"><span class="pre">list</span></code> type and all these operations are, in fact, <em>defined</em> in Lean&#8217;s standard library, and are proved to have the expected properties. Moreover, as the next example shows, the types indicated above are essentially the types of the objects that are defined in the library. (We will explain the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> symbol and the difference between the round and curly brackets momentarily.)</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=open%20list%0A%0A%23check%20list%20%20%20%20%20--%20Type%20u_1%20%E2%86%92%20Type%20u_1%0A%0A%23check%20%40cons%20%20%20%20--%20%CE%A0%20%7B%CE%B1%20%3A%20Type%20u_1%7D%2C%20%CE%B1%20%E2%86%92%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%0A%23check%20%40nil%20%20%20%20%20--%20%CE%A0%20%7B%CE%B1%20%3A%20Type%20u_1%7D%2C%20list%20%CE%B1%0A%23check%20%40head%20%20%20%20--%20%CE%A0%20%7B%CE%B1%20%3A%20Type%20u_1%7D%20%5B_inst_1%20%3A%20inhabited%20%CE%B1%5D%2C%20list%20%CE%B1%20%E2%86%92%20%CE%B1%0A%23check%20%40tail%20%20%20%20--%20%CE%A0%20%7B%CE%B1%20%3A%20Type%20u_1%7D%2C%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%0A%23check%20%40append%20%20--%20%CE%A0%20%7B%CE%B1%20%3A%20Type%20u_1%7D%2C%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">list</span>

<span class="k">#check</span><span class="w"> </span><span class="n">list</span><span class="w">     </span><span class="c1">-- Type u_1 &#8594; Type u_1</span>

<span class="k">#check</span><span class="w"> </span><span class="bp">@</span><span class="n">cons</span><span class="w">    </span><span class="c1">-- &#928; {&#945; : Type u_1}, &#945; &#8594; list &#945; &#8594; list &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">@</span><span class="n">nil</span><span class="w">     </span><span class="c1">-- &#928; {&#945; : Type u_1}, list &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">@</span><span class="n">head</span><span class="w">    </span><span class="c1">-- &#928; {&#945; : Type u_1} [_inst_1 : inhabited &#945;], list &#945; &#8594; &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">@</span><span class="n">tail</span><span class="w">    </span><span class="c1">-- &#928; {&#945; : Type u_1}, list &#945; &#8594; list &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">@</span><span class="n">append</span><span class="w">  </span><span class="c1">-- &#928; {&#945; : Type u_1}, list &#945; &#8594; list &#945; &#8594; list &#945;</span>
</pre></div>
</div>
</div><p>There is a subtlety in the definition of <code class="docutils literal notranslate"><span class="pre">head</span></code>: the type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> is required to have at least one element, and when passed the empty list, the function must determine a default element of the relevant type. We will explain how this is done in <a class="reference internal" href="type_classes.html#type-classes"><span class="std std-numref">Chapter 10</span></a>.</p>
<p>Vector operations are handled similarly:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=universe%20u%0Aconstant%20vec%20%3A%20Type%20u%20%E2%86%92%20%E2%84%95%20%E2%86%92%20Type%20u%0A%0Anamespace%20vec%0Aconstant%20empty%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20vec%20%CE%B1%200%0Aconstant%20cons%20%3A%0A%20%20%CE%A0%20(%CE%B1%20%3A%20Type%20u)%20(n%20%3A%20%E2%84%95)%2C%20%CE%B1%20%E2%86%92%20vec%20%CE%B1%20n%20%E2%86%92%20vec%20%CE%B1%20(n%20%2B%201)%0Aconstant%20append%20%3A%0A%20%20%CE%A0%20(%CE%B1%20%3A%20Type%20u)%20(n%20m%20%3A%20%E2%84%95)%2C%20%20vec%20%CE%B1%20m%20%E2%86%92%20vec%20%CE%B1%20n%20%E2%86%92%20vec%20%CE%B1%20(n%20%2B%20m)%0Aend%20vec" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">universe</span><span class="w"> </span><span class="n">u</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">vec</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span>

<span class="kn">namespace</span><span class="w"> </span><span class="n">vec</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">empty</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">,</span><span class="w"> </span><span class="n">vec</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="mi">0</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">cons</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="bp">&#928;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">),</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">vec</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">vec</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="o">:</span>
<span class="w">  </span><span class="bp">&#928;</span><span class="w"> </span><span class="o">(</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">),</span><span class="w">  </span><span class="n">vec</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">m</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">vec</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">vec</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">(</span><span class="n">n</span><span class="w"> </span><span class="bp">+</span><span class="w"> </span><span class="n">m</span><span class="o">)</span>
<span class="kd">end</span><span class="w"> </span><span class="n">vec</span>
</pre></div>
</div>
</div><p>In the coming chapters, you will come across many instances of dependent types. Here we will mention just one more important and illustrative example, the <em>Sigma types</em>, <code class="docutils literal notranslate"><span class="pre">&#931;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span> <span class="pre">x</span></code>, sometimes also known as <em>dependent products</em>. These are, in a sense, companions to the Pi types. The type <code class="docutils literal notranslate"><span class="pre">&#931;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span> <span class="pre">x</span></code> denotes the type of pairs <code class="docutils literal notranslate"><span class="pre">sigma.mk</span> <span class="pre">a</span> <span class="pre">b</span></code> where <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">:</span> <span class="pre">&#945;</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">:</span> <span class="pre">&#946;</span> <span class="pre">a</span></code>.</p>
<p>Just as Pi types <code class="docutils literal notranslate"><span class="pre">&#928;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span> <span class="pre">x</span></code> generalize the notion of a function type <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">&#8594;</span> <span class="pre">&#946;</span></code> by allowing <code class="docutils literal notranslate"><span class="pre">&#946;</span></code> to depend on <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, Sigma types <code class="docutils literal notranslate"><span class="pre">&#931;</span> <span class="pre">x</span> <span class="pre">:</span> <span class="pre">&#945;,</span> <span class="pre">&#946;</span> <span class="pre">x</span></code> generalize the cartesian product <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">&#215;</span> <span class="pre">&#946;</span></code> in the same way: in the expression <code class="docutils literal notranslate"><span class="pre">sigma.mk</span> <span class="pre">a</span> <span class="pre">b</span></code>, the type of the second element of the pair, <code class="docutils literal notranslate"><span class="pre">b</span> <span class="pre">:</span> <span class="pre">&#946;</span> <span class="pre">a</span></code>, depends on the first element of the pair, <code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">:</span> <span class="pre">&#945;</span></code>.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variable%20%CE%B1%20%3A%20Type%0Avariable%20%CE%B2%20%3A%20%CE%B1%20%E2%86%92%20Type%0Avariable%20a%20%3A%20%CE%B1%0Avariable%20b%20%3A%20%CE%B2%20a%0A%0A%23check%20sigma.mk%20a%20b%20%20%20%20%20%20--%20%CE%A3%20(a%20%3A%20%CE%B1)%2C%20%CE%B2%20a%0A%23check%20(sigma.mk%20a%20b).1%20%20--%20%CE%B1%0A%23check%20(sigma.mk%20a%20b).2%20%20--%20%CE%B2%20(sigma.fst%20(sigma.mk%20a%20b))%0A%0A%23reduce%20%20(sigma.mk%20a%20b).1%20%20--%20a%0A%23reduce%20%20(sigma.mk%20a%20b).2%20%20--%20b" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">variable</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span>
<span class="kd">variable</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="kt">Type</span>
<span class="kd">variable</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">variable</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">a</span>

<span class="k">#check</span><span class="w"> </span><span class="n">sigma.mk</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w">      </span><span class="c1">-- &#931; (a : &#945;), &#946; a</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">sigma.mk</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="w">  </span><span class="c1">-- &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">sigma.mk</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="w">  </span><span class="c1">-- &#946; (sigma.fst (sigma.mk a b))</span>

<span class="k">#reduce</span><span class="w">  </span><span class="o">(</span><span class="n">sigma.mk</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="mi">1</span><span class="w">  </span><span class="c1">-- a</span>
<span class="k">#reduce</span><span class="w">  </span><span class="o">(</span><span class="n">sigma.mk</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="o">)</span><span class="bp">.</span><span class="mi">2</span><span class="w">  </span><span class="c1">-- b</span>
</pre></div>
</div>
</div><p>Notice that the expressions <code class="docutils literal notranslate"><span class="pre">(sigma.mk</span> <span class="pre">a</span> <span class="pre">b).1</span></code> and <code class="docutils literal notranslate"><span class="pre">(sigma.mk</span> <span class="pre">a</span> <span class="pre">b).2</span></code> are short for <code class="docutils literal notranslate"><span class="pre">sigma.fst</span> <span class="pre">(sigma.mk</span> <span class="pre">a</span> <span class="pre">b)</span></code> and <code class="docutils literal notranslate"><span class="pre">sigma.snd</span> <span class="pre">(sigma.mk</span> <span class="pre">a</span> <span class="pre">b)</span></code>, respectively, and that these reduce to <code class="docutils literal notranslate"><span class="pre">a</span></code> and <code class="docutils literal notranslate"><span class="pre">b</span></code>, respectively.</p>
</section>
<section id="implicit-arguments">
<span id="id6"></span><h2><span class="section-number">2.9. </span>Implicit Arguments<a class="headerlink" href="#implicit-arguments" title="Link to this heading">&#182;</a></h2>
<p>Suppose we have an implementation of lists as described above.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20hidden%0Auniverse%20u%0Aconstant%20list%20%3A%20Type%20u%20%E2%86%92%20Type%20u%0A%0Anamespace%20list%0Aconstant%20cons%20%20%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20%CE%B1%20%E2%86%92%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%0Aconstant%20nil%20%20%20%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20list%20%CE%B1%0Aconstant%20append%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%0Aend%20list%0Aend%20hidden" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="n">hidden</span>
<span class="kd">universe</span><span class="w"> </span><span class="n">u</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span>

<span class="kn">namespace</span><span class="w"> </span><span class="n">list</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">cons</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">,</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">nil</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">,</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">,</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">end</span><span class="w"> </span><span class="n">list</span>
<span class="kd">end</span><span class="w"> </span><span class="n">hidden</span>
</pre></div>
</div>
</div><p>Then, given a type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, some elements of <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, and some lists of elements of <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>, we can construct new lists using the constructors.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20hidden%0Auniverse%20u%0Aconstant%20list%20%3A%20Type%20u%20%E2%86%92%20Type%20u%0A%0Anamespace%20list%0Aconstant%20cons%20%20%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20%CE%B1%20%E2%86%92%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%0Aconstant%20nil%20%20%20%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20list%20%CE%B1%0Aconstant%20append%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%0Aend%20list%0A%0A--%20BEGIN%0Aopen%20hidden.list%0A%0Avariable%20%20%CE%B1%20%3A%20Type%0Avariable%20%20a%20%3A%20%CE%B1%0Avariables%20l1%20l2%20%3A%20list%20%CE%B1%0A%0A%23check%20cons%20%CE%B1%20a%20(nil%20%CE%B1)%0A%23check%20append%20%CE%B1%20(cons%20%CE%B1%20a%20(nil%20%CE%B1))%20l1%0A%23check%20append%20%CE%B1%20(append%20%CE%B1%20(cons%20%CE%B1%20a%20(nil%20%CE%B1))%20l1)%20l2%0A--%20END%0Aend%20hidden" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">open</span><span class="w"> </span><span class="n">hidden.list</span>

<span class="kd">variable</span><span class="w">  </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span>
<span class="kd">variable</span><span class="w">  </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">variables</span><span class="w"> </span><span class="n">l1</span><span class="w"> </span><span class="n">l2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span>

<span class="k">#check</span><span class="w"> </span><span class="n">cons</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">(</span><span class="n">nil</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">(</span><span class="n">cons</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">(</span><span class="n">nil</span><span class="w"> </span><span class="n">&#945;</span><span class="o">))</span><span class="w"> </span><span class="n">l1</span>
<span class="k">#check</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">(</span><span class="n">append</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="o">(</span><span class="n">cons</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">(</span><span class="n">nil</span><span class="w"> </span><span class="n">&#945;</span><span class="o">))</span><span class="w"> </span><span class="n">l1</span><span class="o">)</span><span class="w"> </span><span class="n">l2</span>
</pre></div>
</div>
</div><p>Because the constructors are polymorphic over types, we have to insert the type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> as an argument repeatedly. But this information is redundant: one can infer the argument <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> in <code class="docutils literal notranslate"><span class="pre">cons</span> <span class="pre">&#945;</span> <span class="pre">a</span> <span class="pre">(nil</span> <span class="pre">&#945;)</span></code> from the fact that the second argument, <code class="docutils literal notranslate"><span class="pre">a</span></code>, has type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code>. One can similarly infer the argument in <code class="docutils literal notranslate"><span class="pre">nil</span> <span class="pre">&#945;</span></code>, not from anything else in that expression, but from the fact that it is sent as an argument to the function <code class="docutils literal notranslate"><span class="pre">cons</span></code>, which expects an element of type <code class="docutils literal notranslate"><span class="pre">list</span> <span class="pre">&#945;</span></code> in that position.</p>
<p>This is a central feature of dependent type theory: terms carry a lot of information, and often some of that information can be inferred from the context. In Lean, one uses an underscore, <code class="docutils literal notranslate"><span class="pre">_</span></code>, to specify that the system should fill in the information automatically. This is known as an &#8220;implicit argument.&#8221;</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20hidden%0Auniverse%20u%0Aconstant%20list%20%3A%20Type%20u%20%E2%86%92%20Type%20u%0A%0Anamespace%20list%0Aconstant%20cons%20%20%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20%CE%B1%20%E2%86%92%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%0Aconstant%20nil%20%20%20%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20list%20%CE%B1%0Aconstant%20append%20%3A%20%CE%A0%20%CE%B1%20%3A%20Type%20u%2C%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%0Aend%20list%0A%0Aopen%20hidden.list%0A%0Avariable%20%20%CE%B1%20%3A%20Type%0Avariable%20%20a%20%3A%20%CE%B1%0Avariables%20l1%20l2%20%3A%20list%20%CE%B1%0A%0A--%20BEGIN%0A%23check%20cons%20_%20a%20(nil%20_)%0A%23check%20append%20_%20(cons%20_%20a%20(nil%20_))%20l1%0A%23check%20append%20_%20(append%20_%20(cons%20_%20a%20(nil%20_))%20l1)%20l2%0A--%20END%0Aend%20hidden" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">cons</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">(</span><span class="n">nil</span><span class="w"> </span><span class="n">_</span><span class="o">)</span>
<span class="k">#check</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">(</span><span class="n">cons</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">(</span><span class="n">nil</span><span class="w"> </span><span class="n">_</span><span class="o">))</span><span class="w"> </span><span class="n">l1</span>
<span class="k">#check</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">(</span><span class="n">append</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="o">(</span><span class="n">cons</span><span class="w"> </span><span class="n">_</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">(</span><span class="n">nil</span><span class="w"> </span><span class="n">_</span><span class="o">))</span><span class="w"> </span><span class="n">l1</span><span class="o">)</span><span class="w"> </span><span class="n">l2</span>
</pre></div>
</div>
</div><p>It is still tedious, however, to type all these underscores. When a function takes an argument that can generally be inferred from context, Lean allows us to specify that this argument should, by default, be left implicit. This is done by putting the arguments in curly braces, as follows:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=namespace%20hidden%0Auniverse%20u%0Aconstant%20list%20%3A%20Type%20u%20%E2%86%92%20Type%20u%0A%0A--%20BEGIN%0Anamespace%20list%0Aconstant%20cons%20%20%20%3A%20%CE%A0%20%7B%CE%B1%20%3A%20Type%20u%7D%2C%20%CE%B1%20%E2%86%92%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%0Aconstant%20nil%20%20%20%20%3A%20%CE%A0%20%7B%CE%B1%20%3A%20Type%20u%7D%2C%20list%20%CE%B1%0Aconstant%20append%20%3A%20%CE%A0%20%7B%CE%B1%20%3A%20Type%20u%7D%2C%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%20%E2%86%92%20list%20%CE%B1%0Aend%20list%0A%0Aopen%20hidden.list%0A%0Avariable%20%20%CE%B1%20%3A%20Type%0Avariable%20%20a%20%3A%20%CE%B1%0Avariables%20l1%20l2%20%3A%20list%20%CE%B1%0A%0A%23check%20cons%20a%20nil%0A%23check%20append%20(cons%20a%20nil)%20l1%0A%23check%20append%20(append%20(cons%20a%20nil)%20l1)%20l2%0A--%20END%0Aend%20hidden" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kn">namespace</span><span class="w"> </span><span class="n">list</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">cons</span><span class="w">   </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">},</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">nil</span><span class="w">    </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">},</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">constant</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="bp">&#928;</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">},</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">end</span><span class="w"> </span><span class="n">list</span>

<span class="kn">open</span><span class="w"> </span><span class="n">hidden.list</span>

<span class="kd">variable</span><span class="w">  </span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span>
<span class="kd">variable</span><span class="w">  </span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">variables</span><span class="w"> </span><span class="n">l1</span><span class="w"> </span><span class="n">l2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#945;</span>

<span class="k">#check</span><span class="w"> </span><span class="n">cons</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">nil</span>
<span class="k">#check</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="o">(</span><span class="n">cons</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">nil</span><span class="o">)</span><span class="w"> </span><span class="n">l1</span>
<span class="k">#check</span><span class="w"> </span><span class="n">append</span><span class="w"> </span><span class="o">(</span><span class="n">append</span><span class="w"> </span><span class="o">(</span><span class="n">cons</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="n">nil</span><span class="o">)</span><span class="w"> </span><span class="n">l1</span><span class="o">)</span><span class="w"> </span><span class="n">l2</span>
</pre></div>
</div>
</div><p>All that has changed are the braces around <code class="docutils literal notranslate"><span class="pre">&#945;</span> <span class="pre">:</span> <span class="pre">Type</span> <span class="pre">u</span></code> in the declaration of the variables. We can also use this device in function definitions:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=universe%20u%0Adef%20ident%20%7B%CE%B1%20%3A%20Type%20u%7D%20(x%20%3A%20%CE%B1)%20%3A%3D%20x%0A%0Avariables%20%CE%B1%20%CE%B2%20%3A%20Type%20u%0Avariables%20(a%20%3A%20%CE%B1)%20(b%20%3A%20%CE%B2)%0A%0A%23check%20ident%20%20%20%20%20%20--%20%3FM_1%20%E2%86%92%20%3FM_1%0A%23check%20ident%20a%20%20%20%20--%20%CE%B1%0A%23check%20ident%20b%20%20%20%20--%20%CE%B2" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">universe</span><span class="w"> </span><span class="n">u</span>
<span class="kd">def</span><span class="w"> </span><span class="n">ident</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">}</span><span class="w"> </span><span class="o">(</span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">x</span>

<span class="kd">variables</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span>
<span class="kd">variables</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="n">ident</span><span class="w">      </span><span class="c1">-- ?M_1 &#8594; ?M_1</span>
<span class="k">#check</span><span class="w"> </span><span class="n">ident</span><span class="w"> </span><span class="n">a</span><span class="w">    </span><span class="c1">-- &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="n">ident</span><span class="w"> </span><span class="n">b</span><span class="w">    </span><span class="c1">-- &#946;</span>
</pre></div>
</div>
</div><p>This makes the first argument to <code class="docutils literal notranslate"><span class="pre">ident</span></code> implicit. Notationally, this hides the specification of the type, making it look as though <code class="docutils literal notranslate"><span class="pre">ident</span></code> simply takes an argument of any type. In fact, the function <code class="docutils literal notranslate"><span class="pre">id</span></code> is defined in the standard library in exactly this way. We have chosen a nontraditional name here only to avoid a clash of names.</p>
<p>Variables can also be specified as implicit when they are declared with
the <code class="docutils literal notranslate"><span class="pre">variables</span></code> command:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=universe%20u%0A%0Asection%0Avariable%20%7B%CE%B1%20%3A%20Type%20u%7D%0Avariable%20x%20%3A%20%CE%B1%0Adef%20ident%20%3A%3D%20x%0Aend%0A%0Avariables%20%CE%B1%20%CE%B2%20%3A%20Type%20u%0Avariables%20(a%20%3A%20%CE%B1)%20(b%20%3A%20%CE%B2)%0A%0A%23check%20ident%0A%23check%20ident%20a%0A%23check%20ident%20b" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="kd">universe</span><span class="w"> </span><span class="n">u</span>

<span class="kn">section</span>
<span class="kd">variable</span><span class="w"> </span><span class="o">{</span><span class="n">&#945;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span><span class="o">}</span>
<span class="kd">variable</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span>
<span class="kd">def</span><span class="w"> </span><span class="n">ident</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="n">x</span>
<span class="kd">end</span>

<span class="kd">variables</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="kt">Type</span><span class="w"> </span><span class="n">u</span>
<span class="kd">variables</span><span class="w"> </span><span class="o">(</span><span class="n">a</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#945;</span><span class="o">)</span><span class="w"> </span><span class="o">(</span><span class="n">b</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#946;</span><span class="o">)</span>

<span class="k">#check</span><span class="w"> </span><span class="n">ident</span>
<span class="k">#check</span><span class="w"> </span><span class="n">ident</span><span class="w"> </span><span class="n">a</span>
<span class="k">#check</span><span class="w"> </span><span class="n">ident</span><span class="w"> </span><span class="n">b</span>
</pre></div>
</div>
</div><p>This definition of <code class="docutils literal notranslate"><span class="pre">ident</span></code> here has the same effect as the one above.</p>
<p>Lean has very complex mechanisms for instantiating implicit arguments, and we will see that they can be used to infer function types, predicates, and even proofs. The process of instantiating these &#8220;holes,&#8221; or &#8220;placeholders,&#8221; in a term is often known as <em>elaboration</em>. The presence of implicit arguments means that at times there may be insufficient information to fix the meaning of an expression precisely. An expression like <code class="docutils literal notranslate"><span class="pre">id</span></code> or <code class="docutils literal notranslate"><span class="pre">list.nil</span></code> is said to be <em>polymorphic</em>, because it can take on different meanings in different contexts.</p>
<p>One can always specify the type <code class="docutils literal notranslate"><span class="pre">T</span></code> of an expression <code class="docutils literal notranslate"><span class="pre">e</span></code> by writing <code class="docutils literal notranslate"><span class="pre">(e</span> <span class="pre">:</span> <span class="pre">T)</span></code>. This instructs Lean&#8217;s elaborator to use the value <code class="docutils literal notranslate"><span class="pre">T</span></code> as the type of <code class="docutils literal notranslate"><span class="pre">e</span></code> when trying to resolve implicit arguments. In the second pair of examples below, this mechanism is used to specify the desired types of the expressions <code class="docutils literal notranslate"><span class="pre">id</span></code> and <code class="docutils literal notranslate"><span class="pre">list.nil</span></code>:</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23check%20list.nil%20%20%20%20%20%20%20%20%20%20%20%20%20--%20list%20%3FM1%0A%23check%20id%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20--%20%3FM1%20%E2%86%92%20%3FM1%0A%0A%23check%20(list.nil%20%3A%20list%20%E2%84%95)%20%20--%20list%20%E2%84%95%0A%23check%20(id%20%3A%20%E2%84%95%20%E2%86%92%20%E2%84%95)%20%20%20%20%20%20%20%20%20--%20%E2%84%95%20%E2%86%92%20%E2%84%95" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="n">list.nil</span><span class="w">             </span><span class="c1">-- list ?M1</span>
<span class="k">#check</span><span class="w"> </span><span class="n">id</span><span class="w">                   </span><span class="c1">-- ?M1 &#8594; ?M1</span>

<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">list.nil</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">list</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w">  </span><span class="c1">-- list &#8469;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="n">id</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="w"> </span><span class="bp">&#8594;</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w">         </span><span class="c1">-- &#8469; &#8594; &#8469;</span>
</pre></div>
</div>
</div><p>Numerals are overloaded in Lean, but when the type of a numeral cannot be inferred, Lean assumes, by default, that it is a natural number. So the expressions in the first two <code class="docutils literal notranslate"><span class="pre">#check</span></code> commands below are elaborated in the same way, whereas the third <code class="docutils literal notranslate"><span class="pre">#check</span></code> command interprets <code class="docutils literal notranslate"><span class="pre">2</span></code> as an integer.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=%23check%202%20%20%20%20%20%20%20%20%20%20%20%20--%20%E2%84%95%0A%23check%20(2%20%3A%20%E2%84%95)%20%20%20%20%20%20--%20%E2%84%95%0A%23check%20(2%20%3A%20%E2%84%A4)%20%20%20%20%20%20--%20%E2%84%A4" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="mi">2</span><span class="w">            </span><span class="c1">-- &#8469;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="mi">2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8469;</span><span class="o">)</span><span class="w">      </span><span class="c1">-- &#8469;</span>
<span class="k">#check</span><span class="w"> </span><span class="o">(</span><span class="mi">2</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">&#8484;</span><span class="o">)</span><span class="w">      </span><span class="c1">-- &#8484;</span>
</pre></div>
</div>
</div><p>Sometimes, however, we may find ourselves in a situation where we have declared an argument to a function to be implicit, but now want to provide the argument explicitly. If <code class="docutils literal notranslate"><span class="pre">foo</span></code> is such a function, the notation <code class="docutils literal notranslate"><span class="pre">&#64;foo</span></code> denotes the same function with all the arguments made explicit.</p>
<div style="position: relative">
<div style='position: absolute; right: 0; top: 0; padding: 1ex'><a href="https://leanprover-community.github.io/lean-web-editor/#code=variables%20%CE%B1%20%CE%B2%20%3A%20Type%0Avariables%20(a%20%3A%20%CE%B1)%20(b%20%3A%20%CE%B2)%0A%0A--%20BEGIN%0A%23check%20%40id%20%20%20%20%20%20%20%20--%20%CE%A0%20%7B%CE%B1%20%3A%20Type%20u_1%7D%2C%20%CE%B1%20%E2%86%92%20%CE%B1%0A%23check%20%40id%20%CE%B1%20%20%20%20%20%20--%20%CE%B1%20%E2%86%92%20%CE%B1%0A%23check%20%40id%20%CE%B2%20%20%20%20%20%20--%20%CE%B2%20%E2%86%92%20%CE%B2%0A%23check%20%40id%20%CE%B1%20a%20%20%20%20--%20%CE%B1%0A%23check%20%40id%20%CE%B2%20b%20%20%20%20--%20%CE%B2%0A--%20END" target="_blank">
try it!</a></div><div class="highlight-lean notranslate"><div class="highlight"><pre><span></span><span class="k">#check</span><span class="w"> </span><span class="bp">@</span><span class="n">id</span><span class="w">        </span><span class="c1">-- &#928; {&#945; : Type u_1}, &#945; &#8594; &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">@</span><span class="n">id</span><span class="w"> </span><span class="n">&#945;</span><span class="w">      </span><span class="c1">-- &#945; &#8594; &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">@</span><span class="n">id</span><span class="w"> </span><span class="n">&#946;</span><span class="w">      </span><span class="c1">-- &#946; &#8594; &#946;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">@</span><span class="n">id</span><span class="w"> </span><span class="n">&#945;</span><span class="w"> </span><span class="n">a</span><span class="w">    </span><span class="c1">-- &#945;</span>
<span class="k">#check</span><span class="w"> </span><span class="bp">@</span><span class="n">id</span><span class="w"> </span><span class="n">&#946;</span><span class="w"> </span><span class="n">b</span><span class="w">    </span><span class="c1">-- &#946;</span>
</pre></div>
</div>
</div><p>Notice that now the first <code class="docutils literal notranslate"><span class="pre">#check</span></code> command gives the type of the identifier, <code class="docutils literal notranslate"><span class="pre">id</span></code>, without inserting any placeholders. Moreover, the output indicates that the first argument is implicit.</p>
</section>
<section id="exercises">
<h2><span class="section-number">2.10. </span>Exercises<a class="headerlink" href="#exercises" title="Link to this heading">&#182;</a></h2>
<ol class="arabic simple">
<li><p>Define the function <code class="docutils literal notranslate"><span class="pre">Do_Twice</span></code>, as described in <a class="reference internal" href="#introducing-definitions"><span class="std std-numref">Section 2.4</span></a>.</p></li>
<li><p>Define the functions <code class="docutils literal notranslate"><span class="pre">curry</span></code> and <code class="docutils literal notranslate"><span class="pre">uncurry</span></code>, as described in <a class="reference internal" href="#introducing-definitions"><span class="std std-numref">Section 2.4</span></a>.</p></li>
<li><p>Above, we used the example <code class="docutils literal notranslate"><span class="pre">vec</span> <span class="pre">&#945;</span> <span class="pre">n</span></code> for vectors of elements of type <code class="docutils literal notranslate"><span class="pre">&#945;</span></code> of length <code class="docutils literal notranslate"><span class="pre">n</span></code>. Declare a constant <code class="docutils literal notranslate"><span class="pre">vec_add</span></code> that could represent a function that adds two vectors of natural numbers of the same length, and a constant <code class="docutils literal notranslate"><span class="pre">vec_reverse</span></code> that can represent a function that reverses its argument. Use implicit arguments for parameters that can be inferred. Declare some variables and check some expressions involving the constants that you have declared.</p></li>
<li><p>Similarly, declare a constant <code class="docutils literal notranslate"><span class="pre">matrix</span></code> so that <code class="docutils literal notranslate"><span class="pre">matrix</span> <span class="pre">&#945;</span> <span class="pre">m</span> <span class="pre">n</span></code> could represent the type of <code class="docutils literal notranslate"><span class="pre">m</span></code> by <code class="docutils literal notranslate"><span class="pre">n</span></code> matrices. Declare some constants to represent functions on this type, such as matrix addition and multiplication, and (using <code class="docutils literal notranslate"><span class="pre">vec</span></code>) multiplication of a matrix by a vector. Once again, declare some variables and check some expressions involving the constants that you have declared.</p></li>
</ol>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">Theorem Proving in Lean 3 (outdated)</a></h1>








<!-- <h3>Navigation</h3> -->
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">1. Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Dependent Type Theory</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#simple-type-theory">2.1. Simple Type Theory</a></li>
<li class="toctree-l2"><a class="reference internal" href="#types-as-objects">2.2. Types as Objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="#function-abstraction-and-evaluation">2.3. Function Abstraction and Evaluation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#introducing-definitions">2.4. Introducing Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#local-definitions">2.5. Local Definitions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#variables-and-sections">2.6. Variables and Sections</a></li>
<li class="toctree-l2"><a class="reference internal" href="#namespaces">2.7. Namespaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependent-types">2.8. Dependent Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="#implicit-arguments">2.9. Implicit Arguments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercises">2.10. Exercises</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="propositions_and_proofs.html">3. Propositions and Proofs</a></li>
<li class="toctree-l1"><a class="reference internal" href="quantifiers_and_equality.html">4. Quantifiers and Equality</a></li>
<li class="toctree-l1"><a class="reference internal" href="tactics.html">5. Tactics</a></li>
<li class="toctree-l1"><a class="reference internal" href="interacting_with_lean.html">6. Interacting with Lean</a></li>
<li class="toctree-l1"><a class="reference internal" href="inductive_types.html">7. Inductive Types</a></li>
<li class="toctree-l1"><a class="reference internal" href="induction_and_recursion.html">8. Induction and Recursion</a></li>
<li class="toctree-l1"><a class="reference internal" href="structures_and_records.html">9. Structures and Records</a></li>
<li class="toctree-l1"><a class="reference internal" href="type_classes.html">10. Type Classes</a></li>
<li class="toctree-l1"><a class="reference internal" href="axioms_and_computation.html">11. Axioms and Computation</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="theorem_proving_in_lean.pdf">PDF version</a></li>
    
    <li class="toctree-l1"><a href="https://leanprover.github.io/">Lean Home</a></li>
    
</ul>

<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &#169;2017, Jeremy Avigad, Leonardo de Moura, and Soonho Kong.
      
      |
      Powered by <a href="https://www.sphinx-doc.org/">Sphinx 8.1.3</a>
      &amp; <a href="https://alabaster.readthedocs.io">Alabaster 1.0.0</a>
      
      |
      <a href="_sources/dependent_type_theory.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>